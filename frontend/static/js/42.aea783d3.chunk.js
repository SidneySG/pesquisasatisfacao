(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[42],{226:function(e,t,a){"use strict";var n=a(2),l=a(14),r=a(1),i=a(0),o=(a(6),a(3)),c=a(5),s=a(179),m=i.forwardRef((function(e,t){var a,l=e.classes,c=e.className,m=e.component,d=void 0===m?"li":m,u=e.disableGutters,p=void 0!==u&&u,g=e.ListItemClasses,b=e.role,h=void 0===b?"menuitem":b,f=e.selected,y=e.tabIndex,E=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==y?y:-1),i.createElement(s.a,Object(r.a)({button:!0,role:h,tabIndex:a,component:d,selected:f,disableGutters:p,classes:Object(r.a)({dense:l.dense},g),className:Object(o.a)(l.root,c,f&&l.selected,!p&&l.gutters),ref:t},E))}));t.a=Object(c.a)((function(e){return{root:Object(r.a)({},e.typography.body1,Object(l.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(r.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(m)},6108:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));var n=a(209),l=a.n(n),r=a(210),i=a(24),o=a(0),c=a.n(o),s=a(193),m=a(195),d=a(52),u=a(205),p=a(226),g=a(194),b=a(103),h=a(201),f=a(188),y=a(6148),E=a(304),O=a(213),v=(a(212),a(73)),j={height:"450px",width:"100%"},x={fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeOpacity:1,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:1},w={strokeColor:"#2196F3",fillOpacity:.5,strokeOpacity:1,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:1},C={lat:-25.953724,lng:32.588711},N=null,k=[],S={},M={},T=[],F=[],I={};function U(e,t){var a=e.target.files,n=new FileReader;n.readAsDataURL(a[0]),n.onloadend=function(){I[t]=n.result}}function W(){var e=Object(o.useState)(null),t=Object(i.a)(e,2),a=(t[0],t[1],Object(o.useState)(!0)),n=Object(i.a)(a,2),W=n[0],L=n[1],A=Object(o.useState)([]),B=Object(i.a)(A,2),z=(B[0],B[1],Object(o.useState)([])),R=Object(i.a)(z,2),P=R[0],H=R[1],J=Object(o.useState)([]),D=Object(i.a)(J,2),G=D[0],V=(D[1],Object(o.useState)([])),q=Object(i.a)(V,2),K=(q[0],q[1],Object(o.useState)(!1)),Q=Object(i.a)(K,2),X=(Q[0],Q[1]),Y=c.a.useState({drawingMode:"polygon"}),Z=Object(i.a)(Y,2),$=(Z[0],Z[1]);function _(e){L(!1),N=e.target.files[0];var t=new FileReader;N=t.readAsText(N),t.onload=function(){var e=JSON.parse(t.result),a=[],n=[];k=e.features[0].geometry.coordinates[0][0].map((function(e){return a.push(e[1]),n.push(e[0]),{lng:e[0],lat:e[1]}}));var l=(Math.min.apply(Math,a)+Math.max.apply(Math,a))/2,r=(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2;C={lat:l,lng:r},S.coordenadas=k,H(k),L(!0)}}Object(o.useEffect)((function(){function e(){return(e=Object(r.a)(l.a.mark((function e(){var t,a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),e.next=3,Promise.all([Object(v.c)().getOrganisationUnits(),Object(v.c)().getOrganisationUnitLevels(),Object(v.c)().getOrganisationUnitTypes()]);case 3:t=e.sent,a=Object(i.a)(t,3),n=a[0],r=a[1],o=a[2],T=n.data,r.data,F=o.data,X(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ee=function(e){};return c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement(s.a,null,c.a.createElement(O.b,{initialValues:M,onSubmit:function(e,t){var a=t.setSubmitting;function n(){return(n=Object(r.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(I).forEach((function(e){t[e]=I[e]})),e.next=3,Promise.resolve(Object(v.c)().postOrganisationUnits(JSON.stringify(t)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){n.apply(this,arguments)}(e),setTimeout((function(){a(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting,e.handleChange),r=e.handleBlur,i=(e.handleSubmit,e.handleReset,e.setFieldValue);return c.a.createElement(O.a,null,c.a.createElement(m.a,{container:!0,spacing:2},c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(d.a,{variant:"h6"},"Facility Registration Form")),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(u.a,{value:t.name,error:n.name&&a.name,helperText:n.name,name:"name",id:"name",margin:"dense",onChange:l,onBlur:r,variant:"outlined",label:"Name (*)",fullWidth:!0})),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(u.a,{value:t.shortName,error:n.shortName&&a.shortName,helperText:n.shortName,name:"shortName",id:"shortName",margin:"dense",onChange:l,onBlur:r,variant:"outlined",label:"ShortName (*)",fullWidth:!0})),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(u.a,{value:t.displayName,error:n.displayName&&a.displayName,helperText:n.displayName,name:"displayName",id:"displayName",margin:"dense",onChange:l,onBlur:r,variant:"outlined",label:"DisplayName (*)",fullWidth:!0})),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(u.a,{label:"Type",fullWidth:!0,select:!0,helperText:n.orgUnitType&&a.orgUnitType,name:"orgUnitType",id:"orgUnitType",variant:"outlined",margin:"dense",onChange:l,onBlur:r},F.map((function(e){return c.a.createElement(p.a,{key:e,value:e},e)})))),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(y.a,{onChange:function(e,t){i("parent",t)},fullWidth:!0,id:"parent",size:"small",getOptionLabel:function(e){return e.displayName},options:T,style:{minWidth:200},renderInput:function(e){return c.a.createElement(u.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Parent (*)"}))}})),c.a.createElement(m.a,{item:!0},c.a.createElement("input",{onChange:function(e){return U(e,"logo")},accept:"image/*",style:{display:"none"},id:"logo-file",multiple:!0,type:"file"}),c.a.createElement("label",{htmlFor:"logo-file"},c.a.createElement(g.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span"},"Upload Logo"))),c.a.createElement(m.a,{item:!0},c.a.createElement("input",{onChange:function(e){return U(e,"bgImage")},accept:"image/*",style:{display:"none"},id:"bg-file",multiple:!0,type:"file"}),c.a.createElement("label",{htmlFor:"bg-file"},c.a.createElement(g.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span"},"Upload Background Image"))),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(u.a,{label:"Description",variant:"outlined",margin:"dense",multiline:!0,fullWidth:!0})),c.a.createElement(m.a,{item:!0,sm:6},c.a.createElement(d.a,{variant:"button",color:"initial"},"Area geogr\xe1fica")),c.a.createElement(m.a,{item:!0,sm:6,style:{textAlign:"right"}},c.a.createElement("label",{htmlFor:"upload-photo"},c.a.createElement("input",{onChange:_,style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file"}),c.a.createElement(g.a,{disabled:!0,color:"primary",variant:"contained",disableElevation:!0,component:"span"},"Carregar"))),c.a.createElement(m.a,{item:!0,sm:12},c.a.createElement(b.a,{variant:"outlined",style:{minHeight:"450px"}},W?c.a.createElement(E.c,{libraries:["drawing","places"],id:"script-loader"},c.a.createElement(E.b,{id:"example-map",mapContainerStyle:j,draggable:!0,zoom:13,center:C},c.a.createElement(E.e,{onLoad:ee,paths:P,options:x}),c.a.createElement(E.e,{onLoad:ee,paths:G,options:w}),c.a.createElement(E.a,{drawingMode:"polygon",options:{drawingControl:!0,drawingControlOptions:{drawingModes:["polygon"]},polygonOptions:{fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeWeight:2,clickable:!0,editable:!0,draggable:!0,zIndex:1}},onPolygonComplete:function(e){var t=e.getPath().getArray().map((function(e){return{lat:e.lat(),lng:e.lng()}}));i("coordinates",t),$((function(e){return Object.assign({},e,{drawingMode:"maker"})}))}}))):c.a.createElement(h.a,{style:{textAlign:"center",marginTop:"220px"}},c.a.createElement(f.a,null)))),c.a.createElement(m.a,{item:!0,sm:12,style:{textAlign:"right"}},c.a.createElement(g.a,{color:"primary",disableElevation:!0,type:"submit",variant:"contained"},"Save"))))}))))}}}]);
//# sourceMappingURL=42.aea783d3.chunk.js.map