(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[22],{255:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(3)),o=a(5),c=i.forwardRef((function(e,t){var a=e.classes,o=e.className,c=Object(r.a)(e,["classes","className"]);return i.createElement("div",Object(n.a)({className:Object(l.a)(a.root,o),ref:t},c))}));c.muiName="ListItemSecondaryAction",t.a=Object(o.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(c)},330:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(12),l=a(0),o=(a(6),a(3)),c=a(5),s=a(7),u=a(154),d=a(197),p=a(148),m=a(25),b=a(104),f={enter:m.b.enteringScreen,exit:m.b.leavingScreen},h=l.forwardRef((function(e,t){var a=e.BackdropProps,i=e.children,c=e.classes,m=e.className,h=e.disableBackdropClick,v=void 0!==h&&h,E=e.disableEscapeKeyDown,g=void 0!==E&&E,x=e.fullScreen,y=void 0!==x&&x,O=e.fullWidth,j=void 0!==O&&O,k=e.maxWidth,w=void 0===k?"sm":k,W=e.onBackdropClick,S=e.onClose,C=e.onEnter,N=e.onEntered,A=e.onEntering,B=e.onEscapeKeyDown,D=e.onExit,P=e.onExited,M=e.onExiting,R=e.open,T=e.PaperComponent,z=void 0===T?b.a:T,L=e.PaperProps,I=void 0===L?{}:L,U=e.scroll,F=void 0===U?"paper":U,K=e.TransitionComponent,Y=void 0===K?p.a:K,$=e.transitionDuration,G=void 0===$?f:$,X=e.TransitionProps,H=e["aria-describedby"],J=e["aria-labelledby"],q=Object(r.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),Q=l.useRef();return l.createElement(u.a,Object(n.a)({className:Object(o.a)(c.root,m),BackdropComponent:d.a,BackdropProps:Object(n.a)({transitionDuration:G},a),closeAfterTransition:!0,disableBackdropClick:v,disableEscapeKeyDown:g,onEscapeKeyDown:B,onClose:S,open:R,ref:t},q),l.createElement(Y,Object(n.a)({appear:!0,in:R,timeout:G,onEnter:C,onEntering:A,onEntered:N,onExit:D,onExiting:M,onExited:P,role:"none presentation"},X),l.createElement("div",{className:Object(o.a)(c.container,c["scroll".concat(Object(s.a)(F))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===Q.current&&(Q.current=null,W&&W(e),!v&&S&&S(e,"backdropClick"))},onMouseDown:function(e){Q.current=e.target}},l.createElement(z,Object(n.a)({elevation:24,role:"dialog","aria-describedby":H,"aria-labelledby":J},I,{className:Object(o.a)(c.paper,c["paperScroll".concat(Object(s.a)(F))],c["paperWidth".concat(Object(s.a)(String(w)))],I.className,y&&c.paperFullScreen,j&&c.paperFullWidth)}),i))))}));t.a=Object(c.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(h)},331:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(3)),o=a(5),c=i.forwardRef((function(e,t){var a=e.classes,o=e.className,c=e.dividers,s=void 0!==c&&c,u=Object(r.a)(e,["classes","className","dividers"]);return i.createElement("div",Object(n.a)({className:Object(l.a)(a.root,o,s&&a.dividers),ref:t},u))}));t.a=Object(o.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(c)},446:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(3)),o=a(5),c=i.forwardRef((function(e,t){var a=e.disableSpacing,o=void 0!==a&&a,c=e.classes,s=e.className,u=Object(r.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(n.a)({className:Object(l.a)(c.root,s,!o&&c.spacing),ref:t},u))}));t.a=Object(o.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(c)},6656:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return K}));var n=a(246),r=a(221),i=a.n(r),l=a(222),o=a(16),c=a(0),s=a.n(c),u=a(11),d=a(104),p=a(188),m=a(146),b=a(190),f=a(255),h=a(193),v=a(213),E=a(53),g=a(208),x=a(101),y=a(206),O=a(209),j=a(212),k=a(330),w=a(331),W=a(446),S=a(6675),C=a(107),N=a(54),A=a(458),B=a.n(A),D=[],P=[],M=[],R=[],T=[],z={},L="",I=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],U=[{label:"Colunas",value:"colls"},{label:"Barras",value:"bar"},{label:"Linhas",value:"line"},{label:"Pizza",value:"pie"}],F={name:"",title:"",displayName:"",description:""};function K(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),r=a[0],A=a[1],K=Object(c.useState)({changeRoute:!1,to:""}),$=Object(o.a)(K,2),G=$[0],X=$[1],H=Object(c.useState)({label:"Barras",value:"bar"}),J=Object(o.a)(H,2),q=J[0],Q=J[1],V=Object(c.useState)([]),Z=Object(o.a)(V,2),_=Z[0],ee=Z[1],te=Object(c.useState)(!0),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1],ie=Object(c.useState)(!1),le=Object(o.a)(ie,2),oe=le[0],ce=le[1],se=s.a.useState(null),ue=Object(o.a)(se,2),de=ue[0],pe=ue[1],me=function(e){Q(e),pe(null)};function be(){return(be=Object(l.a)(i.a.mark((function e(){var t,a,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(N.c)().getAttributeSet(),Object(N.c)().getOrganisationUnits()]);case 2:t=e.sent,a=Object(o.a)(t,2),n=a[0],l=a[1],T=n.data,P=l.data,A(!r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){D=[],P=[],T=[],z={},M=[],function(){be.apply(this,arguments)}()}),[]);var fe={addAttribute:function(e){M.push(e),A(!r)},removeAttribute:function(e){M=M.filter((function(t){return t!==e})),A(!r)},addOrgUnit:function(e){R.push(e),A(!r)},removeOrgUnit:function(e){R=R.filter((function(t){return t!==e})),A(!r)}},he=function(e,t){return s.a.createElement(d.a,{elevation:0,style:{border:"1px solid #c4c4c4",width:"100%",height:280,overflow:"auto"},square:!0},s.a.createElement(p.a,{dense:!0,component:"div",role:"list"},e.map((function(e,a){return s.a.createElement(m.a,{onDoubleClick:function(){return fe[t](e.id)},key:a,role:"listitem",button:!0},s.a.createElement(b.a,{primary:e.displayName}),s.a.createElement(f.a,null,s.a.createElement(h.a,{color:"secondary",size:"small",onClick:function(){fe[t](e.id)}},s.a.createElement(C.f,null))))})),s.a.createElement(m.a,null)))};function ve(){return(ve=Object(l.a)(i.a.mark((function e(){var t,a,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),t=[],a=[],z.attributes.forEach((function(e){M.includes(e.id)&&t.push(e.uid)})),P.forEach((function(e){R.includes(e.id)&&a.push(e.uid)})),e.next=7,Promise.resolve(Object(N.c)().getAgregatedData(z.uid,t,a,L));case 7:n=e.sent,{title:z.displayName},r={},{},n.data.headers.forEach((function(e){r[e.uid]={displayName:e.displayName,attribute:e.attribute}})),l=n.data.headers.map((function(e,t){return{label:e.displayName+" ("+e.attribute+")",name:I[t],value:n.data.values[e.uid]}})),ee({title:z.displayName,attribute:"Rotas",type:q.value,data:l}),re(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(l.a)(i.a.mark((function t(){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],r=[],z.attributes.forEach((function(e){M.includes(e.id)&&a.push(e)})),P.forEach((function(e){R.includes(e.id)&&r.push(e)})),F=Object(n.a)({},F,{component:q.value,attributeSet:z,attributes:a,orgUnits:r}),t.next=7,Promise.resolve(Object(N.c)().postDashboards(F));case 7:e.messageBox("Dashboard criado com exito!"),X({to:"dashboards",changeRoute:!0});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return G.changeRoute?s.a.createElement(u.a,{to:G.to}):s.a.createElement(v.a,{display:"flex"},s.a.createElement(v.a,{flexGrow:1},s.a.createElement(v.a,{display:"flex"},s.a.createElement(v.a,{flexGrow:1},s.a.createElement(E.a,{variant:"h6",color:"initial"},"Create dashboard element"),s.a.createElement("br",null),s.a.createElement("br",null),!ne&&s.a.createElement(s.a.Fragment,null,s.a.createElement(B.a,{option:Y(_,q.value)}),s.a.createElement("ul",{style:{listStyle:"none"}},_.data.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(E.a,{key:t,variant:"button",style:{textTransform:"none"}},I[t],": ",e.label))}))))),s.a.createElement(v.a,null,s.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){pe(e.currentTarget)}},q.label)," \xa0",s.a.createElement(x.a,{id:"simple-menu",anchorEl:de,keepMounted:!0,open:Boolean(de),onClose:me},U.map((function(e){return s.a.createElement(y.a,{onClick:function(){return me(e)}},e.label)}))),s.a.createElement(g.a,{onClick:function(){return ve.apply(this,arguments)},s:!0,variant:"contained",size:"small",color:"primary"},"Actualizar")," \xa0",s.a.createElement(g.a,{variant:"contained",size:"small",color:"primary"},"Definic\xf5es")," \xa0",s.a.createElement(g.a,{onClick:function(){ce(!0)},variant:"contained",size:"small",color:"primary"},"Salvar")," \xa0"))),s.a.createElement(v.a,{style:{width:"300px",borderLeft:"1px solid #eee",padding:"7px",maxHeight:"calc(100vh - 150px)"}},s.a.createElement(O.a,{container:!0},s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(S.a,{onChange:function(e,t){D=t.attributes,z=t,A(!r)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributeSet",size:"small",options:T,style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute Set"}))}})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(S.a,{onChange:function(e,t){fe.addAttribute(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributes",size:"small",options:D.filter((function(e){return!M.includes(e.id)})),style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute"}))}})),s.a.createElement(O.a,{item:!0,sm:12},he(M.map((function(e){return D.filter((function(t){return t.id==e}))[0]})),"removeAttribute")),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{select:!0,onChange:function(e){L=e.target.value},type:"text",variant:"outlined",name:"periodo",margin:"dense",id:"periodo",fullWidth:!0,label:"Periodo"},s.a.createElement(y.a,{value:"general"},"Geral"),s.a.createElement(y.a,{value:"daily"},"Diario"),s.a.createElement(y.a,{value:"weekly"},"Semanal"),s.a.createElement(y.a,{value:"monthly"},"Mensal"),s.a.createElement(y.a,{value:"yearly"},"Anual"))),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(S.a,{onChange:function(e,t){fe.addOrgUnit(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"instituicao",size:"small",options:P,style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Institui\xe7\xe3o"}))}})),s.a.createElement(O.a,{item:!0,sm:12},he(R.map((function(e){return P.filter((function(t){return t.id==e}))[0]})),"removeOrgUnit"),s.a.createElement("br",null)))),s.a.createElement(k.a,{open:oe,title:"Detalhes do gr\xe1fico"},s.a.createElement(w.a,null,s.a.createElement(O.a,{container:!0},s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{onChange:function(e){F.name=e.target.value},type:"text",variant:"outlined",name:"name",margin:"dense",id:"periodo",fullWidth:!0,label:"Name"})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{onChange:function(e){F.displayName=e.target.value},type:"text",variant:"outlined",name:"displayName",margin:"dense",id:"displayName",fullWidth:!0,label:"Display Name"})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{multiline:!0,rows:4,onChange:function(e){F.description=e.target.value},type:"text",variant:"outlined",name:"description",margin:"dense",id:"description",fullWidth:!0,label:"Description"})))),s.a.createElement(W.a,{style:{textAlign:"right"}},s.a.createElement(g.a,{onClick:function(){ce(!1)},color:"secondary"},"Cancelar"),s.a.createElement(g.a,{onClick:function(){return Ee.apply(this,arguments)},color:"primary",variant:"contained"},"Salvar"))))}function Y(e,t){return Object(n.a)({title:{text:e.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"}},function(e,t){return"bar"==t?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e.data.map((function(e){return e.name}))}}:"pie"!==t?{xAxis:{data:e.data.map((function(e){return e.name}))},yAxis:{}}:void 0}(e,t),{series:[{name:e.attribute,type:"colls"==t?"bar":t,center:["50%","60%"],label:{show:!0,position:"bar"==t?"right":"top"},data:e.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}}}]);
//# sourceMappingURL=22.c404ddd2.chunk.js.map