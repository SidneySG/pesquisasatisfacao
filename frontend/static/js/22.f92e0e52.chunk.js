(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[22],{233:function(e,t,a){"use strict";var n=a(1),r=a(30),i=a(2),l=a(0),o=(a(6),a(4)),c=a(77),s=a(26),u=a(5),d=a(193),m=l.forwardRef((function(e,t){var a=e.autoFocus,u=e.checked,m=e.checkedIcon,p=e.classes,h=e.className,f=e.defaultChecked,b=e.disabled,y=e.icon,v=e.id,g=e.inputProps,E=e.inputRef,O=e.name,k=e.onBlur,x=e.onChange,j=e.onFocus,C=e.readOnly,S=e.required,N=e.tabIndex,w=e.type,z=e.value,A=Object(i.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),L=Object(c.a)({controlled:u,default:Boolean(f),name:"SwitchBase",state:"checked"}),I=Object(r.a)(L,2),D=I[0],B=I[1],P=Object(s.a)(),W=b;P&&"undefined"===typeof W&&(W=P.disabled);var R="checkbox"===w||"radio"===w;return l.createElement(d.a,Object(n.a)({component:"span",className:Object(o.a)(p.root,h,D&&p.checked,W&&p.disabled),disabled:W,tabIndex:null,role:void 0,onFocus:function(e){j&&j(e),P&&P.onFocus&&P.onFocus(e)},onBlur:function(e){k&&k(e),P&&P.onBlur&&P.onBlur(e)},ref:t},A),l.createElement("input",Object(n.a)({autoFocus:a,checked:u,defaultChecked:f,className:p.input,disabled:W,id:R&&v,name:O,onChange:function(e){var t=e.target.checked;B(t),x&&x(e,t)},readOnly:C,ref:E,required:S,tabIndex:N,type:w,value:z},g)),D?m:y)}));t.a=Object(u.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(m)},247:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(4)),o=a(5),c=i.forwardRef((function(e,t){var a=e.classes,o=e.className,c=Object(r.a)(e,["classes","className"]);return i.createElement("div",Object(n.a)({className:Object(l.a)(a.root,o),ref:t},c))}));c.muiName="ListItemSecondaryAction",t.a=Object(o.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(c)},277:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(4)),o=a(26),c=a(5),s=a(53),u=a(7),d=i.forwardRef((function(e,t){e.checked;var a=e.classes,c=e.className,d=e.control,m=e.disabled,p=(e.inputRef,e.label),h=e.labelPlacement,f=void 0===h?"end":h,b=(e.name,e.onChange,e.value,Object(r.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),y=Object(o.a)(),v=m;"undefined"===typeof v&&"undefined"!==typeof d.props.disabled&&(v=d.props.disabled),"undefined"===typeof v&&y&&(v=y.disabled);var g={disabled:v};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof d.props[t]&&"undefined"!==typeof e[t]&&(g[t]=e[t])})),i.createElement("label",Object(n.a)({className:Object(l.a)(a.root,c,"end"!==f&&a["labelPlacement".concat(Object(u.a)(f))],v&&a.disabled),ref:t},b),i.cloneElement(d,g),i.createElement(s.a,{component:"span",className:Object(l.a)(a.label,v&&a.disabled)},p))}));t.a=Object(c.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(d)},288:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),l=(a(6),a(4)),o=a(233),c=a(69),s=Object(c.a)(i.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=Object(c.a)(i.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),d=a(15),m=Object(c.a)(i.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=a(7),h=a(5),f=i.createElement(u,null),b=i.createElement(s,null),y=i.createElement(m,null),v=i.forwardRef((function(e,t){var a=e.checkedIcon,c=void 0===a?f:a,s=e.classes,u=e.color,d=void 0===u?"secondary":u,m=e.icon,h=void 0===m?b:m,v=e.indeterminate,g=void 0!==v&&v,E=e.indeterminateIcon,O=void 0===E?y:E,k=e.inputProps,x=e.size,j=void 0===x?"medium":x,C=Object(r.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),S=g?O:h,N=g?O:c;return i.createElement(o.a,Object(n.a)({type:"checkbox",classes:{root:Object(l.a)(s.root,s["color".concat(Object(p.a)(d))],g&&s.indeterminate),checked:s.checked,disabled:s.disabled},color:d,inputProps:Object(n.a)({"data-indeterminate":g},k),icon:i.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===j?j:S.props.fontSize}),checkedIcon:i.cloneElement(N,{fontSize:void 0===N.props.fontSize&&"small"===j?j:N.props.fontSize}),ref:t},C))}));t.a=Object(h.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(d.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(d.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(v)},6659:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Y}));var n=a(244),r=a(220),i=a.n(r),l=a(221),o=a(16),c=a(0),s=a.n(c),u=a(11),d=a(104),m=a(188),p=a(146),h=a(190),f=a(247),b=a(193),y=a(213),v=a(53),g=a(208),E=a(101),O=a(206),k=a(209),x=a(212),j=a(331),C=a(332),S=a(447),N=a(277),w=a(288),z=a(6678),A=a(107),L=a(54),I=a(310),D=a.n(I),B=[],P=[],W=[],R=[],F=[],H=[],T={},M="",G="",U=[],$=[],Q=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],V={dias:["Segunda","Ter\xe7a","Quarta","Quinta","Sexta","Sabado","Domingo"],horas:["0h","1h","3h","4h","5h","6h","7h","8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h","22h","23h"]},q=[{label:"Colunas",value:"colls"},{label:"Barras",value:"bar"},{label:"Linhas",value:"line"},{label:"Pizza",value:"pie"},{label:"Scatter",value:"scatter"}],J={name:"",title:"",displayName:"",description:"",countEntries:"false"},X=[];function Y(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),r=a[0],I=a[1],Y=Object(c.useState)({changeRoute:!1,to:""}),ee=Object(o.a)(Y,2),te=ee[0],ae=ee[1],ne=Object(c.useState)({label:"Barras",value:"bar"}),re=Object(o.a)(ne,2),ie=re[0],le=re[1],oe=Object(c.useState)([]),ce=Object(o.a)(oe,2),se=ce[0],ue=ce[1],de=Object(c.useState)(!0),me=Object(o.a)(de,2),pe=me[0],he=me[1],fe=Object(c.useState)(!1),be=Object(o.a)(fe,2),ye=be[0],ve=be[1],ge=Object(c.useState)(!1),Ee=Object(o.a)(ge,2),Oe=Ee[0],ke=Ee[1],xe=s.a.useState(null),je=Object(o.a)(xe,2),Ce=je[0],Se=je[1],Ne=function(e){le(e),Se(null)};function we(){return(we=Object(l.a)(i.a.mark((function e(){var t,a,n,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(L.c)().getAttributeSet(),Object(L.c)().getOrganisationUnits(),Object(L.c)().getDataCleaners()]);case 2:t=e.sent,a=Object(o.a)(t,3),n=a[0],l=a[1],c=a[2],H=n.data,X=c.data,P=l.data,I(!r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){B=[],P=[],H=[],X=[],T={},W=[],function(){we.apply(this,arguments)}()}),[]);var ze={addAttribute:function(e){W.push(e),I(!r)},removeAttribute:function(e){W=W.filter((function(t){return t!==e})),I(!r)},addOrgUnit:function(e){F.push(e),I(!r)},removeOrgUnit:function(e){F=F.filter((function(t){return t!==e})),I(!r)}},Ae=function(e,t){return s.a.createElement(d.a,{elevation:0,style:{border:"1px solid #c4c4c4",width:"100%",height:280,overflow:"auto"},square:!0},s.a.createElement(m.a,{dense:!0,component:"div",role:"list"},e.map((function(e,a){return s.a.createElement(p.a,{onDoubleClick:function(){return ze[t](e.id)},key:a,role:"listitem",button:!0},s.a.createElement(h.a,{primary:e.displayName}),s.a.createElement(f.a,null,s.a.createElement(b.a,{color:"secondary",size:"small",onClick:function(){ze[t](e.id)}},s.a.createElement(A.f,null))))})),s.a.createElement(p.a,null)))};function Le(){return(Le=Object(l.a)(i.a.mark((function e(){var t,a,n,r,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he(!0),t=[],a=[],T.attributes.forEach((function(e){W.includes(e.id)&&t.push(e.uid)})),P.forEach((function(e){F.includes(e.id)&&a.push(e.uid)})),n=Object.keys(R).map((function(e){return e+"("+R[e]+")"})).join(","),e.next=8,Promise.resolve(Object(L.c)().getAgregatedData(T.uid,t,a,M,n,null,G,J.countEntries));case 8:r=e.sent,l={},"weekdaysHours"==G&&"true"==J.countEntries?(U=[],$=[],Object.keys(r.data).forEach((function(e){U.push([Number(e.split("-")[0]),Number(e.split("-")[1]),r.data[e]])})),ue({title:T.displayName,attribute:" ",dias:V.dias,horas:V.horas,type:ie.value,data:U}),he(!1)):"weekdaysHours"==G?(l={dias:["Segunda","Ter\xe7a","Quarta","Quinta","Sexta"],horas:["0h","1h","3h","4h","5h","6h","7h","8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h","22h","23h"]},U=[],$=[],r.data.headers.forEach((function(e){$[e.uid]={displayName:e.displayName,attribute:e.attribute},U[e.uid]=[]})),Object.keys(r.data.values).forEach((function(e){U[e.split("-")[0]+"-"+e.split("-")[1]].push([Number(e.split("-")[3]),Number(e.split("-")[2]),r.data.values[e]])})),ue({ks:r.data.headers.map((function(e){return e.uid})),headersDict:V,title:T.displayName,attribute:"Rotas",type:ie.value,data:U}),he(!1)):(r.data.headers.forEach((function(e){l[e.uid]={displayName:e.displayName,attribute:e.attribute}})),o=r.data.headers.map((function(e,t){return{label:e.displayName,name:Q[t],value:r.data.values[e.uid]}})),ue({title:T.displayName,attribute:"Rotas",type:ie.value,data:o}),he(!1));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(l.a)(i.a.mark((function t(){var a,r,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],r=[],T.attributes.forEach((function(e){W.includes(e.id)&&a.push(e)})),P.forEach((function(e){F.includes(e.id)&&r.push(e)})),l=Object.keys(R).map((function(e){return e+"("+R[e]+")"})).join(","),J=Object(n.a)({},J,{component:ie.value,attributeSet:T,attributes:a,orgUnits:r,dataCleaners:l}),"weekdaysHours"==G&&(J.agregationType=G),t.next=9,Promise.resolve(Object(L.c)().postDashboards(J));case 9:e.messageBox("Dashboard criado com exito!"),ae({to:"dashboards",changeRoute:!0});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return te.changeRoute?s.a.createElement(u.a,{to:te.to}):s.a.createElement(y.a,{display:"flex"},s.a.createElement(y.a,{flexGrow:1},s.a.createElement(y.a,{display:"flex"},s.a.createElement(y.a,{flexGrow:1},s.a.createElement(v.a,{variant:"h6",color:"initial"},"Create dashboard element"),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement(y.a,null,s.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){Se(e.currentTarget)}},ie.label)," \xa0",s.a.createElement(E.a,{id:"simple-menu",anchorEl:Ce,keepMounted:!0,open:Boolean(Ce),onClose:Ne},q.map((function(e){return s.a.createElement(O.a,{onClick:function(){return Ne(e)}},e.label)}))),s.a.createElement(g.a,{onClick:function(){return Le.apply(this,arguments)},variant:"contained",size:"small",color:"primary"},"Actualizar")," \xa0",s.a.createElement(g.a,{onClick:function(){ke(!0)},variant:"contained",size:"small",color:"primary"},"Definic\xf5es")," \xa0",s.a.createElement(g.a,{onClick:function(){ve(!0)},variant:"contained",size:"small",color:"primary"},"Salvar")," \xa0")),!pe&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D.a,{option:"scatter"==ie.value?"true"==J.countEntries?_(se):Z(se):K(se,ie.value)}),s.a.createElement("ul",{style:{listStyle:"none"}},se.data.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(v.a,{key:t,variant:"button",style:{textTransform:"none"}},Q[t],": ",e.label))}))))),s.a.createElement(y.a,{style:{width:"300px",borderLeft:"1px solid #eee",padding:"7px",maxHeight:"calc(100vh - 150px)"}},s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(z.a,{onChange:function(e,t){B=t.attributes,T=t,I(!r)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributeSet",size:"small",options:H,style:{minWidth:200},renderInput:function(e){return s.a.createElement(x.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute Set"}))}})),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(z.a,{onChange:function(e,t){ze.addAttribute(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributes",size:"small",options:B.filter((function(e){return!W.includes(e.id)})),style:{minWidth:200},renderInput:function(e){return s.a.createElement(x.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute"}))}})),s.a.createElement(k.a,{item:!0,sm:12},Ae(W.map((function(e){return B.filter((function(t){return t.id==e}))[0]})),"removeAttribute")),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{select:!0,onChange:function(e){M=e.target.value},type:"text",variant:"outlined",name:"periodo",margin:"dense",id:"periodo",fullWidth:!0,label:"Periodo"},s.a.createElement(O.a,{value:"general"},"Geral"),s.a.createElement(O.a,{value:"daily"},"Diario"),s.a.createElement(O.a,{value:"weekly"},"Semanal"),s.a.createElement(O.a,{value:"monthly"},"Mensal"),s.a.createElement(O.a,{value:"yearly"},"Anual"))),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{select:!0,onChange:function(e){G=e.target.value},type:"text",variant:"outlined",name:"agregationType",margin:"dense",id:"agregationType",fullWidth:!0,label:"Tipo de agrega\xe7\xe3o"},s.a.createElement(O.a,{value:""},"Normal"),s.a.createElement(O.a,{value:"weekdaysHours"},"Dia da semana por hora"))),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(z.a,{onChange:function(e,t){ze.addOrgUnit(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"instituicao",size:"small",options:P,style:{minWidth:200},renderInput:function(e){return s.a.createElement(x.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Institui\xe7\xe3o"}))}})),s.a.createElement(k.a,{item:!0,sm:12},Ae(F.map((function(e){return P.filter((function(t){return t.id==e}))[0]})),"removeOrgUnit"),s.a.createElement("br",null)))),s.a.createElement(j.a,{open:ye,title:"Detalhes do gr\xe1fico"},s.a.createElement(C.a,null,s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{onChange:function(e){J.name=e.target.value},type:"text",variant:"outlined",name:"name",margin:"dense",id:"periodo",fullWidth:!0,label:"Name"})),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{onChange:function(e){J.displayName=e.target.value},type:"text",variant:"outlined",name:"displayName",margin:"dense",id:"displayName",fullWidth:!0,label:"Display Name"})),s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{multiline:!0,rows:4,onChange:function(e){J.description=e.target.value},type:"text",variant:"outlined",name:"description",margin:"dense",id:"description",fullWidth:!0,label:"Description"})))),s.a.createElement(S.a,{style:{textAlign:"right"}},s.a.createElement(g.a,{disableElevation:!0,onClick:function(){ve(!1)},color:"secondary"},"Fechar"),"\xa0",s.a.createElement(g.a,{disableElevation:!0,onClick:function(){return Ie.apply(this,arguments)},color:"primary",variant:"contained"},"Salvar"))),s.a.createElement(j.a,{open:Oe,title:"Defini\xe7\xf5es",fullWidth:!0,maxWidth:"sm"},s.a.createElement(C.a,null,s.a.createElement(k.a,{container:!0},s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(N.a,{label:"Total de submi\xe7\xf5es",control:s.a.createElement(w.a,{color:"primary",checked:"true"==J.countEntries,onChange:function(e){J.countEntries=e.target.checked?"true":"false",I(!r)},name:"countEntries"})})),W.map((function(e){return B.filter((function(t){return t.id==e}))[0]})).map((function(e){return s.a.createElement(k.a,{item:!0,sm:12},s.a.createElement(x.a,{select:!0,onChange:function(t){R[e.uid]=t.target.value},type:"text",variant:"outlined",name:"dataCleaner"+e.uid,margin:"dense",id:"dataCleaner"+e.uid,fullWidth:!0,label:e.displayName},X.map((function(e){return s.a.createElement(O.a,{value:e.function},e.label)}))))})))),s.a.createElement(S.a,{style:{textAlign:"right"}},s.a.createElement(g.a,{variant:"contained",onClick:function(){ke(!1)},color:"secondary"},"Fechar"))))}function K(e,t){return Object(n.a)({title:{text:e.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:e.data}},function(e,t){return"bar"==t?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e.data.map((function(e){return e.name}))}}:"pie"!==t?{xAxis:{data:e.data.map((function(e){return e.name}))},yAxis:{}}:void 0}(e,t),{series:[{name:e.attribute,type:"colls"==t?"bar":t,center:["50%","60%"],label:{show:!0,position:"bar"==t?"right":"top"},data:e.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}function Z(e){return{title:{text:e.title},legend:{data:e.ks.map((function(e){return $[e].displayName})),left:"right"},grid:{left:2,bottom:10,right:10,containLabel:!0},xAxis:{type:"category",data:e.horas,boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#999",type:"dashed"}},axisLine:{show:!1}},yAxis:{type:"category",data:e.dias,axisLine:{show:!1}},series:e.ks.map((function(e,t){return{name:$[e].displayName,type:"scatter",symbolSize:function(e){return 4*e[2]},data:U[e],animationDelay:function(e){return 5*e}}}))}}function _(e){return{title:{text:e.title},tooltip:{position:"top",formatter:function(t){return e.horas[t.value[1]]+": "+t.value[2]}},grid:{left:2,bottom:10,right:10,containLabel:!0},xAxis:{type:"category",data:e.dias,boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#999",type:"dashed"}},axisLine:{show:!1}},yAxis:{type:"category",data:e.horas,axisLine:{show:!1}},series:[{type:"scatter",symbolSize:function(e){return 4*e[2]},data:e.data,animationDelay:function(e){return 5*e}}]}}}}]);
//# sourceMappingURL=22.f92e0e52.chunk.js.map