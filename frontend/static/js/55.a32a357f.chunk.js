(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[55],{242:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(49);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},6677:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a(225),r=a.n(n),l=a(242),i=a(226),o=a(15),c=a(0),s=a.n(c),m=a(12),u=a(211),p=a(213),d=a(56),g=a(216),h=a(212),b=a(107),f=a(217),y=a(202),E=a(367),O=a(241),v=(a(240),a(40)),j={height:"450px",width:"100%"},w={fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeOpacity:1,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:1},x={lat:-25.953724,lng:32.588711},S=null,N=[],k={},C={},M={};function P(e,t){var a=e.target.files,n=new FileReader;n.readAsDataURL(a[0]),n.onloadend=function(){M[t]=n.result}}var F=null;function A(e){var t=Object(c.useState)(!0),a=Object(o.a)(t,2),n=a[0],A=a[1],D=Object(c.useState)([]),R=Object(o.a)(D,2),B=R[0],I=R[1],T=Object(c.useState)(!0),W=Object(o.a)(T,2),U=W[0],z=W[1],J=Object(c.useState)(!1),L=Object(o.a)(J,2),V=L[0],H=L[1],q=Object(c.useState)({coordinates:[]}),G=Object(o.a)(q,2),K=G[0],Q=G[1],X=Object(c.useState)({changeRoute:!1,to:""}),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1],_=s.a.useState({drawingMode:"polygon"}),ee=Object(o.a)(_,2),te=(ee[0],ee[1]);function ae(e){A(!1),S=e.target.files[0];var t=new FileReader;S=t.readAsText(S),t.onload=function(){var e=JSON.parse(t.result),a=[],n=[];N=e.features[0].geometry.coordinates[0][0].map((function(e){return a.push(e[1]),n.push(e[0]),{lng:e[0],lat:e[1]}}));var r=(Math.min.apply(Math,a)+Math.max.apply(Math,a))/2,l=(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2;x={lat:r,lng:l},k.coordenadas=N,I(N),A(!0)}}Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F=window.location.href.split("/"),F=atob(F[F.length-1]),e.next=4,Promise.resolve(Object(v.c)().getOrganisationUnits("?id=".concat(F)));case 4:t=e.sent,C=t.data[0],Q(Object(l.a)({},C,{coordinates:[]})),H(!V),z(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ne=function(e){};return Z.changeRoute?s.a.createElement(m.a,{to:Z.to}):U?s.a.createElement(u.a,null,s.a.createElement("div",{class:"loader"},s.a.createElement("div",{class:"inner one"}),s.a.createElement("div",{class:"inner two"}),s.a.createElement("div",{class:"inner three"}))):s.a.createElement("div",null,s.a.createElement(u.a,null,s.a.createElement(O.b,{initialValues:K,onSubmit:function(t,a){var n=a.setSubmitting;function l(){return(l=Object(i.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(M).length>0?Object.keys(M).forEach((function(e){a[e]=M[e]})):(delete a.logo,delete a.bgImage),a.coordinates.length<=0&&B.length>0?a.coordinates=B:a.coordinates.length<=0&&delete a.coordinates,t.next=4,Promise.resolve(Object(v.c)().putOrganisationUnits(JSON.stringify(a),F));case 4:e.messageBox("Institui\xe7\xe3o actualizada com exito!"),$({to:"/instituicoes",changeRoute:!0});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){l.apply(this,arguments)}(t),setTimeout((function(){n(!1)}),500)}},(function(e){var t=e.values,a=e.touched,r=e.errors,l=(e.dirty,e.isSubmitting,e.handleChange),i=e.handleBlur,o=(e.handleSubmit,e.handleReset,e.setFieldValue);return s.a.createElement(O.a,null,s.a.createElement(p.a,{container:!0,spacing:2},s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(d.a,{variant:"h6"},"Edi\xe7\xe3o de institui\xe7\xe3o")),s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(g.a,{value:t.name,error:r.name&&a.name,helperText:r.name,name:"name",id:"name",margin:"dense",onChange:l,onBlur:i,variant:"outlined",label:"Name (*)",fullWidth:!0})),s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(g.a,{value:t.shortName,error:r.shortName&&a.shortName,helperText:r.shortName,name:"shortName",id:"shortName",margin:"dense",onChange:l,onBlur:i,variant:"outlined",label:"ShortName (*)",fullWidth:!0})),s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(g.a,{value:t.displayName,error:r.displayName&&a.displayName,helperText:r.displayName,name:"displayName",id:"displayName",margin:"dense",onChange:l,onBlur:i,variant:"outlined",label:"DisplayName (*)",fullWidth:!0})),s.a.createElement(p.a,{item:!0},s.a.createElement("input",{onChange:function(e){return P(e,"logo")},accept:"image/*",style:{display:"none"},id:"logo-file",multiple:!0,type:"file"}),s.a.createElement("label",{htmlFor:"logo-file"},s.a.createElement(h.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span"},"Upload Logo"))),s.a.createElement(p.a,{item:!0},s.a.createElement("input",{onChange:function(e){return P(e,"bgImage")},accept:"image/*",style:{display:"none"},id:"bg-file",multiple:!0,type:"file"}),s.a.createElement("label",{htmlFor:"bg-file"},s.a.createElement(h.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span"},"Upload Background Image"))),s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(g.a,{label:"Description",variant:"outlined",margin:"dense",multiline:!0,fullWidth:!0}))),s.a.createElement(p.a,{container:!0,spacing:2},s.a.createElement(p.a,{item:!0,sm:6},s.a.createElement(d.a,{variant:"button",color:"initial"},"Area geogr\xe1fica")),s.a.createElement(p.a,{item:!0,sm:6,style:{textAlign:"right"}},s.a.createElement("label",{htmlFor:"upload-photo"},s.a.createElement("input",{onChange:ae,style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file"}),s.a.createElement(h.a,{color:"primary",variant:"contained",disableElevation:!0,component:"span"},"Carregar"))),s.a.createElement(p.a,{item:!0,sm:12},s.a.createElement(b.a,{variant:"outlined",style:{minHeight:"450px"}},n?s.a.createElement(E.c,{libraries:["drawing","places"],id:"script-loader"},s.a.createElement(E.b,{id:"example-map",mapContainerStyle:j,draggable:!0,zoom:13,center:x},s.a.createElement(E.e,{onLoad:ne,paths:B,options:w}),s.a.createElement(E.a,{drawingMode:"polygon",options:{drawingControl:!0,drawingControlOptions:{drawingModes:["polygon"]},polygonOptions:{fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeWeight:2,clickable:!0,editable:!0,draggable:!0,zIndex:1}},onPolygonComplete:function(e){var t=e.getPath().getArray().map((function(e){return{lat:e.lat(),lng:e.lng()}}));o("coordinates",t),te((function(e){return Object.assign({},e,{drawingMode:"maker"})}))}}))):s.a.createElement(f.a,{style:{textAlign:"center",marginTop:"220px"}},s.a.createElement(y.a,null)))),s.a.createElement(p.a,{item:!0,sm:12,style:{textAlign:"right"}},s.a.createElement(h.a,{color:"primary",disableElevation:!0,type:"submit",variant:"contained"},"Save"))))}))))}}}]);
//# sourceMappingURL=55.a32a357f.chunk.js.map