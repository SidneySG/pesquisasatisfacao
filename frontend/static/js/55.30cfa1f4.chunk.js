(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[55],{6636:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return N}));var n=a(246),r=a(221),o=a.n(r),i=a(222),c=a(16),l=a(0),s=a.n(l),d=a(104),u=a(53),m=a(6299),p=a(208),b=a(193),y=a(198),f=a(213),h=a(329),x=a(330),E=a(331),g=a(188),v=a(146),O=a(190),j=a(446),w=a(107),k=a(6674),D=a(6683),C=a(458),M=a.n(C),S=a(54),T=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],A=[];function N(){var e=Object(l.useState)(!0),t=Object(c.a)(e,2),a=t[0],r=t[1],C=Object(l.useState)(3),N=Object(c.a)(C,2),L=N[0],B=N[1],W=Object(l.useState)(null),F=Object(c.a)(W,2),U=F[0],G=F[1],I=Object(l.useState)(!1),J=Object(c.a)(I,2),P=J[0],z=J[1],X=Object(l.useState)([]),H=Object(c.a)(X,2),K=H[0],Q=H[1];function V(){return(V=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(Object(S.c)().getDashboardColecction());case 2:t=e.sent,A=t.data,t.data.length>0&&(G(t.data[0]),Y());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return Z.apply(this,arguments)}function Z(){return(Z=Object(i.a)(o.a.mark((function e(){var t,a,n,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:null,Boolean(U)){e.next=4;break}return r(!1),e.abrupt("return");case 4:r(!0),a=[],(n=U.dashboardElements.map((function(e){return{component:e.dashboard.component,displayName:e.dashboard.displayName,attributeSet:e.dashboard.attributeSet.uid,dataCleaners:e.dashboard.dataCleaners,attributes:e.dashboard.attributes.map((function(e){return e.uid})),orgUnits:e.dashboard.orgUnits.map((function(e){return e.uid}))}}))).forEach(function(){var e=Object(i.a)(o.a.mark((function e(i,c){var l,s,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(Object(S.c)().getAgregatedData(i.attributeSet,i.attributes,i.orgUnits,"yearly",i.dataCleaners,t));case 2:l=e.sent,s={},l.data.headers.forEach((function(e){s[e.uid]={displayName:e.displayName,attribute:e.attribute}})),d=l.data.headers.map((function(e,t){return{label:e.displayName,name:T[t],value:l.data.values[e.uid]}})),a.push({title:i.displayName,attribute:" ",type:i.component,data:d}),c>=n.length-1&&(Q(a),r(!1));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){!function(){V.apply(this,arguments)}()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{style:{padding:"7px 7px 7px 7px",width:"calc(100% - 14px)",borderRadius:"0px",zIndex:"50",textAlign:"center",position:"fixed",marginTop:"55px"}},s.a.createElement(u.a,{variant:"button",style:{textTransform:"none"}},"\xdaltim@s"),s.a.createElement("br",null),s.a.createElement(m.a,{disableElevation:!0,variant:"contained",color:"secondary"},s.a.createElement(p.a,{onClick:function(){B(3),Y(null)},variant:3==L?"contained":"outlined",style:{borderTopLeftRadius:"1.3em",borderBottomLeftRadius:"1.3em",minWidth:"75px",textTransform:"none"}},"Geral"),s.a.createElement(p.a,{onClick:function(){B(0),Y({endDate:"".concat(Object(k.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(k.a)(Object(D.a)(new Date,1),"yyyy-MM-dd"))})},variant:0==L?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"24h"),s.a.createElement(p.a,{onClick:function(){B(1),Y({endDate:"".concat(Object(k.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(k.a)(Object(D.a)(new Date,7),"yyyy-MM-dd"))})},variant:1==L?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"7 dias"),s.a.createElement(p.a,{onClick:function(){B(2),Y({endDate:"".concat(Object(k.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(k.a)(Object(D.a)(new Date,30),"yyyy-MM-dd"))})},variant:2==L?"contained":"outlined",style:{borderTopRightRadius:"1.3em",borderBottomRightRadius:"1.3em",minWidth:"75px",textTransform:"none",borderLeft:"none"}},"30 dias"))),s.a.createElement("br",null),s.a.createElement(b.a,{color:"secondary",onClick:function(){z(!0)},style:{position:"fixed",boxShadow:"none",zIndex:49,top:"127px",right:"0px",margin:"auto"}},s.a.createElement(w.i,null)),s.a.createElement("div",{style:{padding:"10px",marginTop:"107px"}},s.a.createElement("br",null),a?s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(y.a,null)):s.a.createElement(f.a,{style:{width:"100%"}},!a&&K.map((function(e,t){return s.a.createElement(s.a.Fragment,{key:t},s.a.createElement(M.a,{option:(a=e,r=e.type,Object(n.a)({title:{text:a.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"pie"==r?"{b} : {c} ({d}%)":"{b} : {c}"}},R(a,r),{series:[{name:a.attribute,type:"colls"==r?"bar":r,center:["50%","60%"],label:{show:!0,position:"bar"==r?"right":"top",formatter:"pie"==r?"{b}({@2012})":"{c}"},data:a.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))}),s.a.createElement("ul",{key:t,style:{listStyle:"none"}},e.data.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(u.a,{key:t,variant:"button",style:{textTransform:"none"}},T[t],": ",e.label))}))),s.a.createElement("br",null),s.a.createElement(h.a,null),s.a.createElement("br",null));var a,r})))),s.a.createElement(x.a,{open:P,title:"Dashboard collection"},s.a.createElement(E.a,{style:{padding:"0px"}},s.a.createElement(g.a,{component:"div",role:"list"},A.map((function(e,t){return s.a.createElement(v.a,{role:"listitem",button:!0,onClick:function(){G(e),z(!1),Y()},key:t},s.a.createElement(O.a,{primary:e.displayName}))})))),s.a.createElement(j.a,{style:{textAlign:"right"}},s.a.createElement(p.a,{onClick:function(){z(!1)},color:"secondary"},"Fechar"))))}function R(e,t){return"bar"==t?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e.data.map((function(e){return e.name}))}}:"pie"!==t?{xAxis:{data:e.data.map((function(e){return e.name}))},yAxis:{}}:void 0}}}]);
//# sourceMappingURL=55.30cfa1f4.chunk.js.map