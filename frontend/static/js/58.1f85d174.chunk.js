(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[58],{6667:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return R}));var n=t(227),r=t.n(n),l=t(228),i=t(15),c=t(0),o=t.n(c),u=t(12),s=t(107),m=t(192),d=t(149),f=t(194),p=t(285),E=t(197),h=t(211),b=t(56),g=t(213),v=t(216),y=t(882),C=t(862),O=t(866),j=t(864),k=t(865),w=t(863),x=t(212),z=t(6697),D=t(40),N=t(110),W=[],P=[],S=[],I={},L=[],A=null;function R(e){var a=Object(c.useState)(!1),t=Object(i.a)(a,2),n=t[0],R=t[1],J=Object(c.useState)({changeRoute:!1,to:""}),U=Object(i.a)(J,2),_=U[0],q=U[1],B=Object(c.useState)(!0),F=Object(i.a)(B,2),G=(F[0],F[1]);function H(){return(H=Object(l.a)(r.a.mark((function e(){var a,t,n,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=window.location.href.split("/"),A=atob(A[A.length-1]),e.next=4,Promise.all([Object(D.c)().getDashboards(),Object(D.c)().getDashboardColecction("?id=".concat(A)),Object(D.c)().getUsers()]);case 4:a=e.sent,t=Object(i.a)(a,3),n=t[0],l=t[1],c=t[2],I=l.data[0],P=I.dashboardElements.map((function(e){return e.dashboard.id})),L=l.data[0].users,W=n.data,S=c.data,G(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){W=[],P=[],function(){H.apply(this,arguments)}()}),[]);var K={addChart:function(e){P.push(e),R(!n)},removeChart:function(e){P=P.filter((function(a){return a!==e})),R(!n)}};function M(){return(M=Object(l.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return I.dashboardElements=P.map((function(e,a){return{dashboard:{id:e},order:a}})),I.users=L,a.next=4,Promise.resolve(Object(D.c)().putDashboardColecction(I,A));case 4:e.messageBox("Colec\xe7\xe3o actualizada com exito!"),q({to:"dashboardCollection",changeRoute:!0});case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var Q=function(e,a){return o.a.createElement(s.a,{elevation:0,style:{border:"1px solid #c4c4c4",width:"100%",height:280,overflow:"auto"},square:!0},o.a.createElement(m.a,{dense:!0,component:"div",role:"list"},e.map((function(e,t){return o.a.createElement(d.a,{onDoubleClick:function(){return K[a](e.id)},key:t,role:"listitem",button:!0},o.a.createElement(f.a,{primary:e.displayName}),o.a.createElement(p.a,null,o.a.createElement(E.a,{color:a.includes("add")?"primary":"secondary",size:"small",onClick:function(){K[a](e.id)}},a.includes("remove")?o.a.createElement(N.f,null):o.a.createElement(N.g,null))))})),o.a.createElement(d.a,null)))};return _.changeRoute?o.a.createElement(u.a,{to:_.to}):o.a.createElement(h.a,null,o.a.createElement(b.a,{variant:"h6"},"Edi\xe7\xe3o de cole\xe7\xe3o de gr\xe1ficos"),o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,sm:12},o.a.createElement(v.a,{InputLabelProps:{shrink:!0},variant:"outlined",id:"name",label:"Nome",value:I.name,margin:"dense",fullWidth:!0,onChange:function(e){I.name=e.target.value}})),o.a.createElement(g.a,{item:!0,sm:12},o.a.createElement(v.a,{id:"displayName",InputLabelProps:{shrink:!0},label:"Diaplay name",fullWidth:!0,margin:"dense",value:I.displayName,variant:"outlined",onChange:function(e){I.displayName=e.target.value}})),o.a.createElement(g.a,{item:!0,sm:12},o.a.createElement(v.a,{id:"description",InputLabelProps:{shrink:!0},rows:4,multiline:!0,label:"Description",margin:"dense",value:I.description,variant:"outlined",fullWidth:!0,onChange:function(e){I.description=e.target.value}})),o.a.createElement(g.a,{item:!0,sm:6},Q(W.filter((function(e){return!P.includes(e.id)})),"addChart")),o.a.createElement(g.a,{item:!0,sm:6},Q(P.map((function(e){return W.filter((function(a){return a.id==e}))[0]})),"removeChart")),o.a.createElement(g.a,{item:!0,sm:12},o.a.createElement(z.a,{onChange:function(e,a){L.push(a);var t=new Set(L);L=Array.from(t),R(!n)},getOptionLabel:function(e){return e.username},fullWidth:!0,id:"utilizadores",size:"small",options:S,style:{minWidth:200},renderInput:function(e){return o.a.createElement(v.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Adicione utilizadores"}))}})),o.a.createElement(g.a,{item:!0,sm:12},o.a.createElement(y.a,{component:s.a},o.a.createElement(C.a,{size:"small"},o.a.createElement(O.a,null,o.a.createElement(j.a,null,o.a.createElement(k.a,null,"Username"),o.a.createElement(k.a,null,"Name"),o.a.createElement(k.a,null,"Email"),o.a.createElement(k.a,null))),o.a.createElement(w.a,null,L.map((function(e,a){return o.a.createElement(j.a,{key:a},o.a.createElement(k.a,{component:"th",scope:"row"},e.username),o.a.createElement(k.a,null,e.first_name+" "+e.last_name),o.a.createElement(k.a,null,e.email),o.a.createElement(k.a,{align:"right"},o.a.createElement(E.a,{onClick:function(){L=L.filter((function(e,t){return t!==a})),R(!n)},size:"small"},o.a.createElement(N.h,null))))})))))),o.a.createElement(g.a,{item:!0,style:{textAlign:"right"},sm:12},o.a.createElement(x.a,{color:"secondary"},"Cancelar"),"\xa0\xa0",o.a.createElement(x.a,{onClick:function(){return M.apply(this,arguments)},color:"primary",variant:"contained",disableElevation:!0},"Salvar"))))}}}]);
//# sourceMappingURL=58.1f85d174.chunk.js.map