(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[53],{6636:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return M}));var n=a(246),r=a(221),i=a.n(r),o=a(222),c=a(16),u=a(0),s=a.n(u),l=a(104),d=a(53),p=a(6299),m=a(208),b=a(193),y=a(198),f=a(213),h=a(329),x=a(107),g=a(6672),v=a(6681),E=a(458),O=a.n(E),j=a(54),w=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],D=[],k=[];function M(){var t=Object(u.useState)(!0),e=Object(c.a)(t,2),a=e[0],r=e[1],E=Object(u.useState)(3),M=Object(c.a)(E,2),T=M[0],A=M[1];function N(){return(N=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),D=[],k=[],t.next=5,Promise.resolve(Object(j.c)().getDashboards());case 5:e=t.sent,(D=e.data.map((function(t){return{attributeSet:t.attributeSet.uid,attributes:t.attributes.map((function(t){return t.uid})),orgUnits:t.orgUnits.map((function(t){return t.uid}))}}))).forEach(function(){var t=Object(o.a)(i.a.mark((function t(a,n){var o,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(Object(j.c)().getAgregatedData(a.attributeSet,a.attributes,a.orgUnits,"yearly"));case 2:o=t.sent,c={},o.data.headers.forEach((function(t){c[t.uid]={displayName:t.displayName,attribute:t.attribute}})),u=o.data.headers.map((function(t,e){return{label:t.displayName,name:w[e],value:o.data.values[t.uid]}})),k.push({title:e.data[n].displayName,attribute:" ",type:e.data[n].component,data:u}),n>=D.length-1&&(r(!1),console.log(k));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(i.a.mark((function t(){var e,a,n=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:null,r(!0),D=[],k=[],t.next=6,Promise.resolve(Object(j.c)().getDashboards());case 6:a=t.sent,(D=a.data.map((function(t){return{attributeSet:t.attributeSet.uid,attributes:t.attributes.map((function(t){return t.uid})),orgUnits:t.orgUnits.map((function(t){return t.uid}))}}))).forEach(function(){var t=Object(o.a)(i.a.mark((function t(n,o){var c,u,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(Object(j.c)().getAgregatedData(n.attributeSet,n.attributes,n.orgUnits,"yearly",e));case 2:c=t.sent,u={},c.data.headers.forEach((function(t){u[t.uid]={displayName:t.displayName,attribute:t.attribute}})),s=c.data.headers.map((function(t,e){return{label:t.displayName+" ("+t.attribute+")",name:w[e],value:c.data.values[t.uid]}})),k.push({title:a.data[o].displayName,attribute:"Rotas",type:a.data[o].component,data:s}),o>=D.length-1&&(r(!1),console.log(k));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(u.useEffect)((function(){k=[],function(){N.apply(this,arguments)}()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{style:{padding:"7px 7px 7px 7px",width:"calc(100% - 14px)",borderRadius:"0px",zIndex:"50",textAlign:"center",position:"fixed",marginTop:"55px"}},s.a.createElement(d.a,{variant:"button",style:{textTransform:"none"}},"\xdaltim@s"),s.a.createElement("br",null),s.a.createElement(p.a,{disableElevation:!0,variant:"contained",color:"secondary"},s.a.createElement(m.a,{onClick:function(){A(3),R(null)},variant:3==T?"contained":"outlined",style:{borderTopLeftRadius:"1.3em",borderBottomLeftRadius:"1.3em",minWidth:"75px",textTransform:"none"}},"Geral"),s.a.createElement(m.a,{onClick:function(){A(0),R({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(v.a)(new Date,1),"yyyy-MM-dd"))})},variant:0==T?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"24h"),s.a.createElement(m.a,{onClick:function(){A(1),R({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(v.a)(new Date,7),"yyyy-MM-dd"))})},variant:1==T?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"7 dias"),s.a.createElement(m.a,{onClick:function(){A(2),R({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(v.a)(new Date,30),"yyyy-MM-dd"))})},variant:2==T?"contained":"outlined",style:{borderTopRightRadius:"1.3em",borderBottomRightRadius:"1.3em",minWidth:"75px",textTransform:"none",borderLeft:"none"}},"30 dias"))),s.a.createElement("br",null),s.a.createElement(b.a,{color:"secondary",style:{position:"fixed",boxShadow:"none",zIndex:49,top:"127px",right:"0px",margin:"auto"}},s.a.createElement(x.i,null)),s.a.createElement("div",{style:{padding:"10px",marginTop:"107px"}},s.a.createElement("br",null),a?s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(y.a,null)):s.a.createElement(f.a,{style:{width:"100%"}},!a&&k.map((function(t,e){return s.a.createElement(s.a.Fragment,{key:e},s.a.createElement(O.a,{option:(a=t,r=t.type,Object(n.a)({title:{text:a.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"pie"==r?"{b} : {c} ({d}%)":"{b} : {c}"}},S(a,r),{series:[{name:a.attribute,type:"colls"==r?"bar":r,center:["50%","60%"],label:{show:!0,position:"bar"==r?"right":"top",formatter:"pie"==r?"{b}({@2012})":"{c}"},data:a.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))}),s.a.createElement("ul",{key:e,style:{listStyle:"none"}},t.data.map((function(t,e){return s.a.createElement("li",{key:e},s.a.createElement(d.a,{key:e,variant:"button",style:{textTransform:"none"}},w[e],": ",t.label))}))),s.a.createElement("br",null),s.a.createElement(h.a,null),s.a.createElement("br",null));var a,r})))))}function S(t,e){return"bar"==e?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t.data.map((function(t){return t.name}))}}:"pie"!==e?{xAxis:{data:t.data.map((function(t){return t.name}))},yAxis:{}}:void 0}}}]);
//# sourceMappingURL=53.01520ded.chunk.js.map