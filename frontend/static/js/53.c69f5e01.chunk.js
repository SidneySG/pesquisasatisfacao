(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[53],{6636:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return M}));var n=a(246),r=a(221),i=a.n(r),o=a(222),c=a(16),u=a(0),s=a.n(u),l=a(104),d=a(53),p=a(6299),m=a(208),b=a(193),f=a(198),y=a(213),h=a(329),x=a(107),g=a(6672),E=a(6681),v=a(458),O=a.n(v),j=a(54),w=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],D=[],k=[];function M(){var t=Object(u.useState)(!0),e=Object(c.a)(t,2),a=e[0],n=e[1],r=Object(u.useState)([]),v=Object(c.a)(r,2),M=(v[0],v[1],Object(u.useState)(3)),T=Object(c.a)(M,2),R=T[0],N=T[1];function A(){return(A=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),D=[],k=[],t.next=5,Promise.resolve(Object(j.c)().getDashboards());case 5:e=t.sent,(D=e.data.map((function(t){return{attributeSet:t.attributeSet.uid,attributes:t.attributes.map((function(t){return t.uid})),orgUnits:t.orgUnits.map((function(t){return t.uid}))}}))).forEach(function(){var t=Object(o.a)(i.a.mark((function t(a,r){var o,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(Object(j.c)().getAgregatedData(a.attributeSet,a.attributes,a.orgUnits,"yearly"));case 2:o=t.sent,c={},o.data.headers.forEach((function(t){c[t.uid]={displayName:t.displayName,attribute:t.attribute}})),u=o.data.headers.map((function(t,e){return{label:t.displayName+" ("+t.attribute+")",name:w[e],value:o.data.values[t.uid]}})),k.push({title:e.data[r].displayName,attribute:"Rotas",type:e.data[r].component,data:u}),r>=D.length-1&&(n(!1),console.log(k));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(i.a.mark((function t(){var e,a,r=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,n(!0),D=[],k=[],t.next=6,Promise.resolve(Object(j.c)().getDashboards());case 6:a=t.sent,(D=a.data.map((function(t){return{attributeSet:t.attributeSet.uid,attributes:t.attributes.map((function(t){return t.uid})),orgUnits:t.orgUnits.map((function(t){return t.uid}))}}))).forEach(function(){var t=Object(o.a)(i.a.mark((function t(r,o){var c,u,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(Object(j.c)().getAgregatedData(r.attributeSet,r.attributes,r.orgUnits,"yearly",e));case 2:c=t.sent,u={},c.data.headers.forEach((function(t){u[t.uid]={displayName:t.displayName,attribute:t.attribute}})),s=c.data.headers.map((function(t,e){return{label:t.displayName+" ("+t.attribute+")",name:w[e],value:c.data.values[t.uid]}})),k.push({title:a.data[o].displayName,attribute:"Rotas",type:a.data[o].component,data:s}),o>=D.length-1&&(n(!1),console.log(k));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(u.useEffect)((function(){k=[],function(){A.apply(this,arguments)}()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{style:{padding:"7px 7px 7px 7px",width:"calc(100% - 14px)",borderRadius:"0px",zIndex:"50",textAlign:"center",position:"fixed",marginTop:"55px"}},s.a.createElement(d.a,{variant:"button",style:{textTransform:"none"}},"\xdaltim@s"),s.a.createElement("br",null),s.a.createElement(p.a,{disableElevation:!0,variant:"contained",color:"secondary"},s.a.createElement(m.a,{onClick:function(){N(3),U(null)},variant:3==R?"contained":"outlined",style:{borderTopLeftRadius:"1.3em",borderBottomLeftRadius:"1.3em",minWidth:"75px",textTransform:"none"}},"Geral"),s.a.createElement(m.a,{onClick:function(){N(0),U({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(E.a)(new Date,1),"yyyy-MM-dd"))})},variant:0==R?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"24h"),s.a.createElement(m.a,{onClick:function(){N(1),U({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(E.a)(new Date,7),"yyyy-MM-dd"))})},variant:1==R?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"}},"7 dias"),s.a.createElement(m.a,{onClick:function(){N(2),U({endDate:"".concat(Object(g.a)(new Date,"yyyy-MM-dd")),startDate:"".concat(Object(g.a)(Object(E.a)(new Date,30),"yyyy-MM-dd"))})},variant:2==R?"contained":"outlined",style:{borderTopRightRadius:"1.3em",borderBottomRightRadius:"1.3em",minWidth:"75px",textTransform:"none",borderLeft:"none"}},"30 dias"))),s.a.createElement("br",null),s.a.createElement(b.a,{color:"secondary",style:{position:"fixed",boxShadow:"none",zIndex:49,top:"127px",right:"0px",margin:"auto"}},s.a.createElement(x.i,null)),s.a.createElement("div",{style:{padding:"10px",marginTop:"107px"}},s.a.createElement("br",null),a?s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(f.a,null)):s.a.createElement(y.a,{style:{width:"100%"}},!a&&k.map((function(t,e){return s.a.createElement(s.a.Fragment,{key:e},s.a.createElement(O.a,{option:S(t,t.type)}),s.a.createElement("ul",{key:e,style:{listStyle:"none"}},t.data.map((function(t,e){return s.a.createElement("li",{key:e},s.a.createElement(d.a,{key:e,variant:"button",style:{textTransform:"none"}},w[e],": ",t.label))}))),s.a.createElement("br",null),s.a.createElement(h.a,null),s.a.createElement("br",null))})))))}function S(t,e){return Object(n.a)({title:{text:t.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"}},function(t,e){if("pie"!==e)return{xAxis:{data:t.data.map((function(t){return t.name}))},yAxis:{}}}(t,e),{series:[{name:t.attribute,type:e,center:["50%","60%"],label:{show:!0,position:"top"},data:t.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}}}]);
//# sourceMappingURL=53.c69f5e01.chunk.js.map