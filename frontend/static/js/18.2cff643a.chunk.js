(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[18],{233:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},249:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(233);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},255:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),o=(a(6),a(3)),l=a(5),c=i.forwardRef((function(e,t){var a=e.classes,l=e.className,c=Object(r.a)(e,["classes","className"]);return i.createElement("div",Object(n.a)({className:Object(o.a)(a.root,l),ref:t},c))}));c.muiName="ListItemSecondaryAction",t.a=Object(l.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(c)},330:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(12),o=a(0),l=(a(6),a(3)),c=a(5),s=a(7),u=a(154),d=a(197),p=a(148),m=a(25),b=a(104),f={enter:m.b.enteringScreen,exit:m.b.leavingScreen},h=o.forwardRef((function(e,t){var a=e.BackdropProps,i=e.children,c=e.classes,m=e.className,h=e.disableBackdropClick,v=void 0!==h&&h,g=e.disableEscapeKeyDown,E=void 0!==g&&g,y=e.fullScreen,x=void 0!==y&&y,O=e.fullWidth,j=void 0!==O&&O,w=e.maxWidth,k=void 0===w?"sm":w,S=e.onBackdropClick,W=e.onClose,C=e.onEnter,N=e.onEntered,D=e.onEntering,P=e.onEscapeKeyDown,B=e.onExit,A=e.onExited,M=e.onExiting,R=e.open,L=e.PaperComponent,T=void 0===L?b.a:L,I=e.PaperProps,z=void 0===I?{}:I,U=e.scroll,K=void 0===U?"paper":U,F=e.TransitionComponent,Y=void 0===F?p.a:F,$=e.transitionDuration,X=void 0===$?f:$,G=e.TransitionProps,H=e["aria-describedby"],J=e["aria-labelledby"],q=Object(r.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),Q=o.useRef();return o.createElement(u.a,Object(n.a)({className:Object(l.a)(c.root,m),BackdropComponent:d.a,BackdropProps:Object(n.a)({transitionDuration:X},a),closeAfterTransition:!0,disableBackdropClick:v,disableEscapeKeyDown:E,onEscapeKeyDown:P,onClose:W,open:R,ref:t},q),o.createElement(Y,Object(n.a)({appear:!0,in:R,timeout:X,onEnter:C,onEntering:D,onEntered:N,onExit:B,onExiting:M,onExited:A,role:"none presentation"},G),o.createElement("div",{className:Object(l.a)(c.container,c["scroll".concat(Object(s.a)(K))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===Q.current&&(Q.current=null,S&&S(e),!v&&W&&W(e,"backdropClick"))},onMouseDown:function(e){Q.current=e.target}},o.createElement(T,Object(n.a)({elevation:24,role:"dialog","aria-describedby":H,"aria-labelledby":J},z,{className:Object(l.a)(c.paper,c["paperScroll".concat(Object(s.a)(K))],c["paperWidth".concat(Object(s.a)(String(k)))],z.className,x&&c.paperFullScreen,j&&c.paperFullWidth)}),i))))}));t.a=Object(c.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(i.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(h)},331:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),o=(a(6),a(3)),l=a(5),c=i.forwardRef((function(e,t){var a=e.classes,l=e.className,c=e.dividers,s=void 0!==c&&c,u=Object(r.a)(e,["classes","className","dividers"]);return i.createElement("div",Object(n.a)({className:Object(o.a)(a.root,l,s&&a.dividers),ref:t},u))}));t.a=Object(l.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(c)},446:function(e,t,a){"use strict";var n=a(1),r=a(2),i=a(0),o=(a(6),a(3)),l=a(5),c=i.forwardRef((function(e,t){var a=e.disableSpacing,l=void 0!==a&&a,c=e.classes,s=e.className,u=Object(r.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(n.a)({className:Object(o.a)(c.root,s,!l&&c.spacing),ref:t},u))}));t.a=Object(l.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(c)},6656:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var n=a(249),r=a(221),i=a.n(r),o=a(222),l=a(16),c=a(0),s=a.n(c),u=a(11),d=a(104),p=a(188),m=a(146),b=a(190),f=a(255),h=a(193),v=a(213),g=a(53),E=a(208),y=a(101),x=a(206),O=a(209),j=a(212),w=a(330),k=a(331),S=a(446),W=a(6675),C=a(107),N=a(54),D=a(458),P=a.n(D),B=[],A=[],M=[],R=[],L=[],T={},I="",z=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],U=[{label:"Barras",value:"bar"},{label:"Linhas",value:"line"}],K={name:"",title:"",displayName:"",description:""};function F(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),r=a[0],D=a[1],F=Object(c.useState)({changeRoute:!1,to:""}),$=Object(l.a)(F,2),X=$[0],G=$[1],H=Object(c.useState)({label:"Barras",value:"bar"}),J=Object(l.a)(H,2),q=J[0],Q=J[1],V=Object(c.useState)([]),Z=Object(l.a)(V,2),_=Z[0],ee=Z[1],te=Object(c.useState)(!0),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ie=Object(c.useState)(!1),oe=Object(l.a)(ie,2),le=oe[0],ce=oe[1],se=s.a.useState(null),ue=Object(l.a)(se,2),de=ue[0],pe=ue[1],me=function(e){Q(e),pe(null)};function be(){return(be=Object(o.a)(i.a.mark((function e(){var t,a,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(N.c)().getAttributeSet(),Object(N.c)().getOrganisationUnits()]);case 2:t=e.sent,a=Object(l.a)(t,2),n=a[0],o=a[1],L=n.data,A=o.data,D(!r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){B=[],A=[],L=[],T={},function(){be.apply(this,arguments)}()}),[]);var fe={addAttribute:function(e){M.push(e),D(!r)},removeAttribute:function(e){M=M.filter((function(t){return t!==e})),D(!r)},addOrgUnit:function(e){R.push(e),D(!r)},removeOrgUnit:function(e){R=R.filter((function(t){return t!==e})),D(!r)}},he=function(e,t){return s.a.createElement(d.a,{elevation:0,style:{border:"1px solid #c4c4c4",width:"100%",height:280,overflow:"auto"},square:!0},s.a.createElement(p.a,{dense:!0,component:"div",role:"list"},e.map((function(e,a){return s.a.createElement(m.a,{onDoubleClick:function(){return fe[t](e.id)},key:a,role:"listitem",button:!0},s.a.createElement(b.a,{primary:e.displayName}),s.a.createElement(f.a,null,s.a.createElement(h.a,{color:"secondary",size:"small",onClick:function(){fe[t](e.id)}},s.a.createElement(C.f,null))))})),s.a.createElement(m.a,null)))};function ve(){return(ve=Object(o.a)(i.a.mark((function e(){var t,a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),t=[],a=[],T.attributes.forEach((function(e){M.includes(e.id)&&t.push(e.uid)})),A.forEach((function(e){R.includes(e.id)&&a.push(e.uid)})),e.next=7,Promise.resolve(Object(N.c)().getAgregatedData(T.uid,t,a,I));case 7:n=e.sent,{title:T.displayName},r={},{},n.data.headers.forEach((function(e){r[e.uid]={displayName:e.displayName,attribute:e.attribute}})),o=n.data.headers.map((function(e,t){return{label:e.displayName+" ("+e.attribute+")",name:z[t],value:n.data.values[e.uid]}})),ee({title:T.displayName,attribute:"Rotas",type:q.value,data:o}),re(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(o.a)(i.a.mark((function t(){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],r=[],T.attributes.forEach((function(e){M.includes(e.id)&&a.push(e)})),A.forEach((function(e){R.includes(e.id)&&r.push(e)})),K=Object(n.a)({},K,{component:q.value,attributeSet:T,attributes:a,orgUnits:r}),t.next=7,Promise.resolve(Object(N.c)().postDashboards(K));case 7:e.messageBox("Dashboard criado com exito!"),G({to:"dashboards",changeRoute:!0});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return X.changeRoute?s.a.createElement(u.a,{to:X.to}):s.a.createElement(v.a,{display:"flex"},s.a.createElement(v.a,{flexGrow:1},s.a.createElement(v.a,{display:"flex"},s.a.createElement(v.a,{flexGrow:1},s.a.createElement(g.a,{variant:"h6",color:"initial"},"Create dashboard element"),s.a.createElement("br",null),s.a.createElement("br",null),!ne&&s.a.createElement(P.a,{option:Y(_,q.value)})),s.a.createElement(v.a,null,s.a.createElement(E.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){pe(e.currentTarget)}},q.label)," \xa0",s.a.createElement(y.a,{id:"simple-menu",anchorEl:de,keepMounted:!0,open:Boolean(de),onClose:me},U.map((function(e){return s.a.createElement(x.a,{onClick:function(){return me(e)}},e.label)}))),s.a.createElement(E.a,{onClick:function(){return ve.apply(this,arguments)},s:!0,variant:"contained",size:"small",color:"primary"},"Actualizar")," \xa0",s.a.createElement(E.a,{variant:"contained",size:"small",color:"primary"},"Definic\xf5es")," \xa0",s.a.createElement(E.a,{onClick:function(){ce(!0)},variant:"contained",size:"small",color:"primary"},"Salvar")," \xa0"))),s.a.createElement(v.a,{style:{width:"300px",borderLeft:"1px solid #eee",padding:"7px",maxHeight:"calc(100vh - 150px)"}},s.a.createElement(O.a,{container:!0},s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(W.a,{onChange:function(e,t){B=t.attributes,T=t,D(!r)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributeSet",size:"small",options:L,style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute Set"}))}})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(W.a,{onChange:function(e,t){fe.addAttribute(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"attributes",size:"small",options:B.filter((function(e){return!M.includes(e.id)})),style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Attribute"}))}})),s.a.createElement(O.a,{item:!0,sm:12},he(M.map((function(e){return B.filter((function(t){return t.id==e}))[0]})),"removeAttribute")),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{select:!0,onChange:function(e){I=e.target.value},type:"text",variant:"outlined",name:"periodo",margin:"dense",id:"periodo",fullWidth:!0,label:"Periodo"},s.a.createElement(x.a,{value:"general"},"Geral"),s.a.createElement(x.a,{value:"daily"},"Diario"),s.a.createElement(x.a,{value:"weekly"},"Semanal"),s.a.createElement(x.a,{value:"monthly"},"Mensal"),s.a.createElement(x.a,{value:"yearly"},"Anual"))),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(W.a,{onChange:function(e,t){fe.addOrgUnit(t.id)},getOptionLabel:function(e){return e.displayName},fullWidth:!0,id:"instituicao",size:"small",options:A,style:{minWidth:200},renderInput:function(e){return s.a.createElement(j.a,Object.assign({variant:"outlined",margin:"dense",fullWidth:!0},e,{label:"Institui\xe7\xe3o"}))}})),s.a.createElement(O.a,{item:!0,sm:12},he(R.map((function(e){return A.filter((function(t){return t.id==e}))[0]})),"removeOrgUnit"),s.a.createElement("br",null)))),s.a.createElement(w.a,{open:le,title:"Detalhes do gr\xe1fico"},s.a.createElement(k.a,null,s.a.createElement(O.a,{container:!0},s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{onChange:function(e){K.name=e.target.value},type:"text",variant:"outlined",name:"name",margin:"dense",id:"periodo",fullWidth:!0,label:"Name"})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{onChange:function(e){K.displayName=e.target.value},type:"text",variant:"outlined",name:"displayName",margin:"dense",id:"displayName",fullWidth:!0,label:"Display Name"})),s.a.createElement(O.a,{item:!0,sm:12},s.a.createElement(j.a,{multiline:!0,rows:4,onChange:function(e){K.description=e.target.value},type:"text",variant:"outlined",name:"description",margin:"dense",id:"description",fullWidth:!0,label:"Description"})))),s.a.createElement(S.a,{style:{textAlign:"right"}},s.a.createElement(E.a,{onClick:function(){ce(!1)},color:"secondary"},"Cancelar"),s.a.createElement(E.a,{onClick:function(){return ge.apply(this,arguments)},color:"primary",variant:"contained"},"Salvar"))))}function Y(e,t){return{title:{text:e.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:e.data.map((function(e){return e.name}))},xAxis:{data:e.data.map((function(e){return e.name}))},yAxis:{},series:[{name:e.attribute,type:t,center:["50%","60%"],label:{show:!0,position:"top"},data:e.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}}]);
//# sourceMappingURL=18.2cff643a.chunk.js.map