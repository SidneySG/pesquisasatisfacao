(this["webpackJsonpmobile.atendimento.co.mz"]=this["webpackJsonpmobile.atendimento.co.mz"]||[]).push([[19],{1556:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return Mt}));var r=a(41),n=a.n(r),i=a(64),s=a(23),c=a(0),o=a.n(c),d=a(522),u=a(493),l=a(121),b=a(58),p=a(1536),j=a(386),h=a(344),x=a(393),f=a(395),m=a(387),O=a(388),y=a(389),v=a(1429),g=a(1537),w=a.n(g),S=a(1538),A=a.n(S),N=a(1539),k=a.n(N),C=a(1555),D=a(1569),T=a(74),E=a(401),F=a(98),L=a(32),B=a(1007),U=a(1534),M=a(476),W=a(4),R=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],H=!0,P=[],z=[];function I(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useState)(!0),l=Object(s.a)(u,2),p=l[0],j=l[1],h=Object(c.useState)({data:[]}),x=Object(s.a)(h,2),f=x[0],m=x[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,i,s,c,o,d,u,l,b,p,h,x;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H&&j(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData({attributeSet:e.attributeSet,attributes:e.attributes,orgUnits:e.orgUnits,periodType:"yearly",dataCleaners:e.dataCleaners,period:r,distinctForms:e.distinctForms}));case 3:a=t.sent,i={},a.data.headers.forEach((function(t){i[t.uid]={displayName:t.displayName,attribute:t.attribute}})),s=a.data.headers.map((function(t,r){return{label:t.displayName,name:"true"==e.useDisplayNameAsLabel?t.displayName:R[r],value:a.data.values[t.uid]}})),"true"==e.groupByAttributes?(c=a.data.headers.map((function(t){return t.uid.split("-")[1]})),c=new Set(c),c=(c=Array.from(c)).map((function(t){return{label:a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0].displayName,value:t}})),o=a.data.headers.map((function(t){return t.attributeUID})),o=new Set(o),o=Array.from(o),z=c,o=o.map((function(t){return{label:a.data.headers.filter((function(e){return e.attributeUID==t}))[0].attribute,value:t}})),"true"==e.frequency?(d=a.data.info.valueSets,P=[["product"].concat(Object(L.a)(c.map((function(t){return t.label}))))].concat(Object(L.a)(o.map((function(t){return[t.label].concat(Object(L.a)(c.map((function(e){return Boolean(a.data.values[t.value+"-"+e.value])?a.data.values[t.value+"-"+e.value]/d:0}))))}))))):P=[["product"].concat(Object(L.a)(c.map((function(t){return t.label}))))].concat(Object(L.a)(o.map((function(t){return[t.label].concat(Object(L.a)(c.map((function(e){return Boolean(a.data.values[t.value+"-"+e.value])?a.data.values[t.value+"-"+e.value]:0}))))})))),m({title:e.displayName,attribute:" ",type:e.component,data:P})):"true"==e.groupByOptions?(u=a.data.headers.map((function(t){return t.uid.split("-")[1]})),u=new Set(u),u=Array.from(u),l=[],u=u.map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return l[t]=0,{label:e.displayName,value:t}})),"true"==e.frequency&&(b=a.data.info.valueSets,p=[],h=a.data.headers.map((function(t){return t.uid.split("-")[1]})),h=new Set(h),h=(h=Array.from(h)).map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return p[t]=0,{label:e.displayName,value:t}})),Object.keys(a.data.values).forEach((function(t){p[t.split("-")[1]]=Number(p[t.split("-")[1]])+Number(a.data.values[t])})),x=h.map((function(t){return{label:t.label,name:t.label,value:p[t.value]/b}})),m({title:e.displayName,attribute:" ",type:e.component,data:x}))):("ASC"==e.sort&&s.sort((function(t,e){return t.value>e.value?1:-1})),"DESC"==e.sort&&s.sort((function(t,e){return t.value<e.value?1:-1})),m({title:e.displayName,attribute:" ",type:e.component,data:s})),H&&(H=!1),j(!1);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),p?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"rect",width:"100%",height:118})}):Object(W.jsxs)("div",{style:{padding:d?"20px":"10px 5px"},children:[Object(W.jsx)(M.a,{style:e.height.includes("px")?{height:e.height,width:"100%"}:{width:"100%"},option:"true"==e.groupByAttributes?_(f,f.type):q(f,f.type)}),d&&Object(W.jsx)("div",{style:{textAlign:"center"},children:f.data.map((function(t,e){return Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[R[e],": ",t.label,"; "]},e)}))}),!d&&Object(W.jsx)("ul",{style:{listStyle:"none",display:"true"==e.showLegend?"block":"none"},children:f.data.map((function(t,e){return Object(W.jsx)("li",{children:Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[R[e],": ",t.label]},e)},e)}))}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}function q(t,e){return Object(F.a)(Object(F.a)({title:{text:t.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"pie"==e?"{b} : {c} ({d}%)":"{b} : {c}"}},function(t,e){return"bar"==e?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t.data.map((function(t){return t.name}))}}:"pie"!==e?{xAxis:{data:t.data.map((function(t){return t.name}))},yAxis:{}}:void 0}(t,e)),{},{series:[{name:t.attribute,type:"colls"==e?"bar":e,center:["50%","60%"],label:{show:!0,position:"bar"==e?"right":"top",formatter:"pie"==e?"{b}({@2012})":"{c}"},data:t.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}function _(t,e){return{title:{text:t.title,subtext:"",x:"center"},tooltip:{},dataset:{source:t.data},xAxis:{type:"category"},yAxis:{},series:z.map((function(t){return{type:"bar"}}))}}var G=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Q=!0;function J(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useState)(!0),l=Object(s.a)(u,2),p=l[0],j=l[1],h=Object(c.useState)([]),x=Object(s.a)(h,2),f=x[0],m=x[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,i,s,c,o,d,u,l,b;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q&&j(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData({attributeSet:e.attributeSet,attributes:e.attributes,orgUnits:e.orgUnits,periodType:"yearly",dataCleaners:e.dataCleaners,period:r,distinctForms:e.distinctForms}));case 3:a=t.sent,"true"==e.frequency?(i=a.data.headers.map((function(t){return t.uid.split("-")[1]})),i=new Set(i),i=Array.from(i),s=[],i=i.map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return s[t]=0,{label:e.displayName,value:t}})),"true"==e.frequency&&(c=a.data.info.valueSets,o=[],d=a.data.headers.map((function(t){return t.uid.split("-")[1]})),d=new Set(d),d=(d=Array.from(d)).map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return o[t]=0,{label:e.displayName,value:t}})),Object.keys(a.data.values).forEach((function(t){o[t.split("-")[1]]=Number(o[t.split("-")[1]])+Number(a.data.values[t])})),u=d.map((function(t){return{label:t.label,name:t.label,value:(o[t.value]/c).toFixed(2)}})),m({title:e.displayName,attribute:" ",type:e.component,data:u}))):(l={},a.data.headers.forEach((function(t){l[t.uid]={displayName:t.displayName,attribute:t.attribute}})),b=a.data.headers.map((function(t,e){return{label:t.displayName,name:G[e],value:a.data.values[t.uid]}})),m({title:e.displayName,attribute:" ",type:e.component,data:b})),Q&&(Q=!1),j(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),p?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"circle",style:{margin:"auto"},width:210,height:210})}):Object(W.jsxs)("div",{style:{padding:d?"20px":"10px 5px"},children:[Object(W.jsx)(M.a,{option:V(f,f.type)}),d&&Object(W.jsx)("div",{style:{textAlign:"center"},children:f.data.map((function(t,e){return Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[G[e],": ",t.label,"; "]},e)}))}),!d&&Object(W.jsx)("ul",{style:{listStyle:"none"},children:f.data.map((function(t,e){return Object(W.jsx)("li",{children:Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[G[e],": ",t.label]},e)},e)}))}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}function V(t,e){return Object(F.a)(Object(F.a)({title:{text:t.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"pie"==e?"{b} : {c} ({d}%)":"{b} : {c}"}},function(t,e){return"bar"==e?{xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t.data.map((function(t){return t.name}))}}:"pie"!==e?{xAxis:{data:t.data.map((function(t){return t.name}))},yAxis:{}}:void 0}(t,e)),{},{series:[{name:t.attribute,type:"colls"==e?"bar":e,center:["50%","60%"],label:{show:!0,position:"bar"==e?"right":"top",formatter:"pie"==e?"{b}({@2012})":"{c}"},data:t.data,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}var X={dias:["Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado","Domingo"],horas:["0h","1h","2h","3h","4h","5h","6h","7h","8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h","22h","23h"]},K=!0;function Y(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useState)(!0),l=Object(s.a)(u,2),b=l[0],p=l[1],j=Object(c.useState)([]),h=Object(s.a)(j,2),x=h[0],f=h[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return K&&p(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData({attributeSet:e.attributeSet,attributes:e.attributes,orgUnits:e.orgUnits,periodType:"yearly",dataCleaners:e.dataCleaners,period:r,distinctForms:e.distinctForms,agregationType:e.agregationType,countEntries:"false"}));case 3:a=t.sent,i=[],Object.keys(a.data.values).forEach((function(t){i.push([Number(t.split("-")[0]),Number(t.split("-")[1]),a.data.values[t]])})),f({title:e.displayName,attribute:" ",type:e.component,data:i}),K=!1,p(!1);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),b?Object(W.jsx)("div",{style:{paddingBottom:"10px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"rect",width:"100%",style:{margin:"auto"},height:118})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(M.a,{style:e.height.includes("px")?{height:e.height,width:"100%"}:{width:"100%"},option:Z(x)}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}function Z(t){return{title:{text:t.title,x:"center"},tooltip:{position:"top",formatter:function(t){return X.horas[t.value[1]]+": "+t.value[2]}},grid:{left:2,bottom:10,right:10,containLabel:!0},xAxis:{type:"category",data:X.dias,boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#999",type:"dashed"}},axisLine:{show:!1}},yAxis:{type:"category",data:X.horas,axisLine:{show:!1}},series:[{type:"scatter",symbolSize:function(t){return 4*t[2]},data:t.data,animationDelay:function(t){return 5*t}}]}}var $=a(126),tt=[],et={dias:["Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado","Domingo"],horas:["0h","1h","2h","3h","4h","5h","6h","7h","8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h","22h","23h"]},at=!0;function rt(t){var e,a=t.dashboard,r=t.period,o=void 0===r?null:r,d=t.isDesktop,u=void 0!==d&&d,l=Object(c.useState)(!0),b=Object(s.a)(l,2),p=b[0],j=b[1],h=Object(c.useState)([]),x=Object(s.a)(h,2),f=x[0],m=x[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var e,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return at&&j(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData({attributeSet:a.attributeSet,attributes:a.attributes,orgUnits:a.orgUnits,periodType:"yearly",dataCleaners:a.dataCleaners,period:o,distinctForms:a.distinctForms,agregationType:a.agregationType,countEntries:"false"}));case 3:e=t.sent,r=[],tt=[],e.data.headers.forEach((function(t){tt[t.uid]={displayName:t.displayName,attribute:t.attribute},r[t.uid]=[]})),Object.keys(e.data.values).forEach((function(t){r[t.split("-")[0]+"-"+t.split("-")[1]].push([Number(t.split("-")[3]),Number(t.split("-")[2]),e.data.values[t]])})),m({ks:e.data.headers.map((function(t){return t.uid})),title:a.displayName,horas:et.horas,dias:et.dias,attribute:" ",type:"scatter",data:r}),at&&(at=!1),j(!1);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[o,a]),p?Object(W.jsx)("div",{style:{paddingBottom:"10px"},children:Object(W.jsx)(U.a,(e={variant:"rect",width:"100%",style:{margin:"auto"}},Object($.a)(e,"width",210),Object($.a)(e,"height",210),e))}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(M.a,{style:a.height.includes("px")?{height:a.height,width:"100%"}:{width:"100%"},option:nt(f)}),!u&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}function nt(t){return{title:{text:t.title,x:"center"},legend:{data:t.ks.map((function(t){return tt[t].displayName})),bottom:0,textStyle:{fontWeight:"bold",fontFamily:"Roboto",fontSize:16}},tooltip:{position:"bottom",formatter:function(e){return t.horas[e.value[1]]+": "+e.value[2]}},grid:{left:2,bottom:45,right:10,containLabel:!0},xAxis:{type:"category",data:t.horas,boundaryGap:!1,splitLine:{show:!0,lineStyle:{color:"#999",type:"dashed"}},axisLine:{show:!1}},yAxis:{type:"category",data:t.dias,axisLine:{show:!1}},series:t.ks.map((function(e,a){return{name:tt[e].displayName,type:"scatter",symbolSize:function(t){return 4*t[2]},data:t.data[e],animationDelay:function(t){return 5*t}}}))}}var it=a(1008),st=a(1535),ct=a.n(st),ot=a(1557),dt=a(1009),ut=!0,lt=[];function bt(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,d=t.isDesktop,p=void 0!==d&&d,j=Object(c.useState)(!0),h=Object(s.a)(j,2),x=h[0],f=h[1],m=Object(c.useState)(!1),O=Object(s.a)(m,2),y=O[0],v=O[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ut?f(!0):v(!0),t.next=3,Promise.resolve(Object(T.d)().getFieldsValues(e.attributeSet,e.attributes,e.orgUnits,e.dataCleaners,r));case 3:a=t.sent,lt=a.data.valores,ut=!1,v(!1),f(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),x?Object(W.jsx)("div",{style:{paddingBottom:"10px"},children:Object(W.jsx)(U.a,{animation:"wave",style:{margin:"auto"},variant:"rect",width:"100%",height:118})}):Object(W.jsxs)("div",{children:[y&&Object(W.jsx)(it.a,{}),Object(W.jsx)(u.a,{container:!0,spacing:2,style:{paddingTop:"5px"},children:lt.map((function(t,e){return Object(W.jsx)(u.a,{item:!0,xs:p?3:12,children:Object(W.jsx)(l.a,{variant:"outlined",style:{border:"0px solid #fff",margin:"0px 3px",padding:"10px",borderRadius:"8px",boxShadow:"0 1px 6px rgba(32, 33, 36, 0.28)"},children:Object(W.jsxs)(b.a,{component:"div",children:[Object(W.jsxs)(E.a,{color:"textSecondary",children:[Object(W.jsx)(ct.a,{style:{fontSize:15,marginTop:"4px"}}),"\xa0\xa0",Object(ot.a)(new Date(t[0].created_at),new Date,{locale:dt.pt})]}),t.map((function(e,a){return Object(W.jsxs)(o.a.Fragment,{children:[Object(W.jsx)(E.a,{fontWeight:"fontWeightMedium",children:e.displayName}),Object(W.jsx)(E.a,{fontWeight:"fontWeightRegular",children:e.value}),a!==t.length-1&&Object(W.jsx)(B.a,{})]},a)}))]})})},e)}))})]})}function pt(t){var e=t.isLoading,a=t.period,r=t.charts;return e?Object(W.jsx)("div",{style:{minHeight:"calc(100vh - 140px)"},children:Object(W.jsx)("p",{children:"Carregando..."})}):Object(W.jsxs)(E.a,{style:{width:"100%"},children:[r.length<=0&&Object(W.jsx)(l.a,{elevation:0,style:{padding:"10px",textAlign:"center",color:"#fff"},children:Object(W.jsx)(b.a,{children:"Nenhuma comment\xe1rio encontrado"})}),r.map((function(t,e){return function(t,e){switch(t.component){case"pie":return Object(W.jsx)(J,{period:a,dashboard:t},e);case"scatter":return t.countEntries.includes("true")?Object(W.jsx)(Y,{period:a,dashboard:t},e):Object(W.jsx)(rt,{period:a,dashboard:t},e);case"comments":case"table":return Object(W.jsx)(bt,{period:a,dashboard:t},e);default:return Object(W.jsx)(I,{period:a,dashboard:t},e)}}(t,e)}))]})}var jt=a(1427),ht=a.n(jt);function xt(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useRef)(null),l=Object(c.useState)(!1),p=Object(s.a)(l,2),j=p[0],h=p[1],x=Object(c.useState)(!0),f=Object(s.a)(x,2),m=f[0],O=f[1];function y(){return(y=Object(i.a)(n.a.mark((function t(){var a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,Promise.resolve(Object(T.d)().getWordcloud(e.attributeSet,e.attributes,e.orgUnits,r));case 3:a=t.sent,i=Object.keys(a.data).map((function(t){return[t,a.data[t]+14]})),O(!1),ht()(document.getElementById("myWordCloudCanvas"),{list:i,fontFamily:"Times, serif",fontWeight:"normal",minSize:14}),h(!j);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){return y.apply(this,arguments)}),[r]),m?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"rect",width:"100%",height:d?230:118})}):Object(W.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(W.jsx)(b.a,{variant:"h6",component:"div",style:{textAlign:"center"},children:e.displayName}),Object(W.jsx)("canvas",{height:388,style:{width:"100%",height:"calc(420px * ".concat(e.rows," - 32px)")},id:"myWordCloudCanvas",ref:u}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}var ft=a(1507),mt=a(392),Ot={lat:-25.953724,lng:32.588711},yt={height:"calc(420px - 32px)",width:"100%"},vt={imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"},gt=[];function wt(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o;yt={height:"calc(420px * ".concat(e.rows," - 32px)"),width:"100%"};var u=Object(c.useState)(!0),l=Object(s.a)(u,2),p=l[0],j=l[1],h=Object(c.useState)(!1),x=Object(s.a)(h,2),f=x[0],m=x[1],O=Object(c.useState)(!1),y=Object(s.a)(O,2),v=y[0],g=y[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),g(!0),t.next=4,Promise.resolve(Object(T.d)().getValueSets("?fields=id,latitude,longitude&attributeSet__uid=".concat(e.attributeSet,"&").concat(Boolean(r)?"&created_at__gte="+r.startDate+"&created_at__lte="+r.endDate:"")));case 4:a=t.sent,gt=a.data.map((function(t){return{lat:Number(t.latitude),lng:Number(t.longitude)}})),!1,g(!1),j(!1),m(!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),p?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"rect",width:"100%",height:d?230:118})}):Object(W.jsxs)("div",{style:{backgroundColor:"#fff",height:"100%",width:"100%"},children:[v&&Object(W.jsx)(it.a,{}),Object(W.jsx)(b.a,{variant:"h6",component:"div",style:{textAlign:"center"},children:e.displayName}),f?Object(W.jsx)(ft.b,{libraries:["drawing","places"],googleMapsApiKey:"AIzaSyCkSLY0dJ1OTSqDsuaojBCAMxUsF3Ihrr8",id:"script-loader",children:Object(W.jsx)(ft.a,{id:"example-map",mapContainerStyle:yt,options:{streetViewControl:!1},draggable:!0,zoom:4,center:Ot,children:Object(W.jsx)(ft.d,{options:vt,children:function(t){return gt.map((function(e,a){return Object(W.jsx)(ft.c,{position:e,clusterer:t},a)}))}})})}):Object(W.jsx)(E.a,{style:{textAlign:"center",marginTop:"220px"},children:Object(W.jsx)(mt.a,{})}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}var St=!0,At=[],Nt=[];function kt(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useState)(!0),l=Object(s.a)(u,2),b=l[0],p=l[1],j=Object(c.useState)({data:[]}),h=Object(s.a)(j,2),x=h[0],f=h[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,i,s,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return St&&p(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData(e.attributeSet,e.attributes,e.orgUnits,"yearly",e.dataCleaners,r));case 3:a=t.sent,i={},a.data.headers.forEach((function(t){i[t.uid]={displayName:t.displayName,attribute:t.attribute}})),s=a.data.headers.map((function(t){return t.uid.split("-")[1]})),s=new Set(s),s=(s=Array.from(s)).map((function(t){return{label:a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0].displayName,value:t}})),c=a.data.headers.map((function(t){return t.attributeUID})),c=new Set(c),c=Array.from(c),Nt=s,c=c.map((function(t){return{label:a.data.headers.filter((function(e){return e.attributeUID==t}))[0].attribute,value:t}})),"true"==e.groupByAttributes?At={dimensions:["product"].concat(Object(L.a)(Array.from(new Set(a.data.headers.map((function(t){return t.displayName})))))),source:c.map((function(t){var e={product:t.label};return s.forEach((function(r){var n=t.value+"-"+r.value;e[i[n].displayName]=Boolean(a.data.values[t.value+"-"+r.value])?a.data.values[t.value+"-"+r.value]/a.data.info.frequenciaAcumuladaAttributos[t.value]*100:0})),console.log(e),e}))}:"true"==e.groupByOptions&&(At={dimensions:["product"].concat(Object(L.a)(Array.from(new Set(a.data.headers.map((function(t){return t.attribute})))))),source:s.map((function(t){var e={product:t.label};return c.forEach((function(r){var n=r.value+"-"+t.value;e[i[n].attribute]=Boolean(a.data.values[r.value+"-"+t.value])?a.data.values[r.value+"-"+t.value]/a.data.info.frequenciaAcumuladaAttributos[r.value]*100:0})),e}))}),f({title:e.displayName,attribute:" ",data:At}),St&&(St=!1),p(!1);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),b?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"rect",width:"100%",height:d?230:118})}):Object(W.jsxs)("div",{style:{padding:d?"20px 8px":"10px 2px"},children:[Object(W.jsx)(M.a,{style:e.height.includes("px")?{height:e.height,width:"100%"}:{width:"100%"},option:Ct(x)}),!d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("br",{}),Object(W.jsx)(B.a,{}),Object(W.jsx)("br",{})]})]})}function Ct(t){return{title:{text:t.title,subtext:"",x:"center"},legend:{bottom:10},tooltip:{},dataset:t.data,xAxis:{type:"category"},yAxis:{},series:Nt.map((function(t){return{type:"bar"}}))}}var Dt=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Tt=!0;function Et(t){var e=t.dashboard,a=t.period,r=void 0===a?null:a,o=t.isDesktop,d=void 0!==o&&o,u=Object(c.useState)(!0),l=Object(s.a)(u,2),p=l[0],j=l[1],h=Object(c.useState)([]),x=Object(s.a)(h,2),f=x[0],m=x[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(n.a.mark((function t(){var a,i,s,c,o,d,u,l,b;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Tt&&j(!0),t.next=3,Promise.resolve(Object(T.d)().getAgregatedData({attributeSet:e.attributeSet,attributes:e.attributes,orgUnits:e.orgUnits,periodType:"yearly",dataCleaners:e.dataCleaners,period:r,distinctForms:e.distinctForms}));case 3:a=t.sent,"true"==e.frequency?(i=a.data.headers.map((function(t){return t.uid.split("-")[1]})),i=new Set(i),i=Array.from(i),s=[],i=i.map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return s[t]=0,{label:e.displayName,value:t}})),"true"==e.frequency&&(c=a.data.info.valueSets,o=[],d=a.data.headers.map((function(t){return t.uid.split("-")[1]})),d=new Set(d),d=(d=Array.from(d)).map((function(t){var e=a.data.headers.filter((function(e){return e.uid.split("-")[1]==t}))[0];return o[t]=0,{label:e.displayName,value:t}})),Object.keys(a.data.values).forEach((function(t){o[t.split("-")[1]]=Number(o[t.split("-")[1]])+Number(a.data.values[t])})),u=d.map((function(t){return{label:t.label,name:t.label,value:(o[t.value]/c).toFixed(2)}})),m({title:e.displayName,attribute:" ",type:e.component,data:u}))):(l={},a.data.headers.forEach((function(t){l[t.uid]={displayName:t.displayName,attribute:t.attribute}})),b=a.data.headers.map((function(t,e){return{label:t.displayName,name:Dt[e],value:a.data.values[t.uid]}})),m({title:e.displayName,attribute:" ",type:e.component,data:b})),Tt&&(Tt=!1),j(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[r,e]),p?Object(W.jsx)("div",{style:{padding:d?"20px":"10px 5px"},children:Object(W.jsx)(U.a,{animation:"wave",variant:"circle",style:{margin:"auto"},width:210,height:210})}):Object(W.jsxs)("div",{style:{padding:d?"20px":"10px 5px"},children:[Object(W.jsx)(M.a,{option:Ft(f,f.type)}),d&&Object(W.jsx)("div",{style:{textAlign:"center"},children:f.data.map((function(t,e){return Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[Dt[e],": ",t.label,"; "]},e)}))}),!d&&Object(W.jsx)("ul",{style:{listStyle:"none"},children:f.data.map((function(t,e){return Object(W.jsx)("li",{children:Object(W.jsxs)(b.a,{variant:"button",style:{textTransform:"none"},children:[Dt[e],": ",t.label]},e)},e)}))})]})}function Ft(t,e){return{title:{text:t.title,subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},series:[{name:t.attribute,type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,center:["50%","60%"],label:{show:!0,position:"bar"==e?"right":"top",formatter:"pie"==e?"{b}({@2012})":"{c}"},data:t.data,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2}}]}}function Lt(t){var e=t.isLoading,a=t.period,r=t.charts;return e?Object(W.jsx)("div",{style:{minHeight:"calc(100vh - 140px)"},children:Object(W.jsx)("p",{children:"Carregando..."})}):Object(W.jsx)(E.a,{style:{width:"100%"},children:r.map((function(t,e){return function(t,e){switch(t.component){case"pie":return Object(W.jsx)(J,{period:a,dashboard:t},e);case"pieRadius":return Object(W.jsx)(Et,{period:a,dashboard:t},e);case"scatter":return t.countEntries.includes("true")?Object(W.jsx)(Y,{period:a,dashboard:t},e):Object(W.jsx)(rt,{period:a,dashboard:t},e);case"comments":case"table":return Object(W.jsx)(bt,{period:a,dashboard:t},e);case"clusteredMapMarkers":return Object(W.jsx)(wt,{period:a,dashboard:t},e);case"dataset":return Object(W.jsx)(kt,{period:a,dashboard:t},e);case"wordcloud":return Object(W.jsx)(xt,{period:a,dashboard:t},e);default:return Object(W.jsx)(I,{period:a,dashboard:t},e)}}(t,e)}))})}function Bt(t){var e=t.isLoading,a=t.period,r=t.charts;return e?Object(W.jsx)("div",{style:{minHeight:"calc(100vh - 140px)"},children:Object(W.jsx)("p",{children:"Carregando..."})}):Object(W.jsxs)(E.a,{style:{width:"100%"},children:[r.length<=0&&Object(W.jsx)(l.a,{elevation:0,style:{padding:"10px",textAlign:"center",color:"#fff"},children:Object(W.jsx)(b.a,{children:"Nenhuma tabela foi encontrada"})}),r.map((function(t,e){return function(t,e){switch(t.component){case"pie":return Object(W.jsx)(J,{period:a,dashboard:t},e);case"scatter":return t.countEntries.includes("true")?Object(W.jsx)(Y,{period:a,dashboard:t},e):Object(W.jsx)(rt,{period:a,dashboard:t},e);case"comments":case"table":return Object(W.jsx)(bt,{period:a,dashboard:t},e);case"clusteredMapMarkers":return Object(W.jsx)(wt,{period:a,dashboard:t},e);case"wordcloud":return Object(W.jsx)(xt,{period:a,dashboard:t},e);default:return Object(W.jsx)(I,{period:a,dashboard:t},e)}}(t,e)}))]})}var Ut=[];function Mt(){var t=Object(c.useState)(!0),e=Object(s.a)(t,2),a=e[0],r=e[1],o=Object(c.useState)(3),g=Object(s.a)(o,2),S=g[0],N=g[1],E=Object(c.useState)([]),F=Object(s.a)(E,2),L=F[0],B=F[1],U=Object(c.useState)(!1),M=Object(s.a)(U,2),R=M[0],H=M[1],P=Object(c.useState)(null),z=Object(s.a)(P,2),I=z[0],q=z[1],_=Object(c.useState)(1),G=Object(s.a)(_,2),Q=G[0],J=G[1],V=Object(c.useState)(!1),X=Object(s.a)(V,2),K=X[0],Y=X[1];function Z(){return(Z=Object(i.a)(n.a.mark((function t(){var e;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.resolve(Object(T.d)().getCharts());case 3:e=t.sent,Ut=e.data,e.data.length>0&&$(e.data[0]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Y(!0);case 11:r(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function $(t){B(t.dashboardElements)}function tt(){var t=new Date;return t.setHours(0),t.setMinutes(0),t}function et(t){var e=new Date;return e.setHours(0),e.setMinutes(0),Object(C.a)(Object(D.a)(e,t),"yyyy-MM-dd HH:mm")}Object(c.useEffect)((function(){return Z.apply(this,arguments)}),[]);return K?Object(W.jsxs)(d.a,{children:[Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(u.a,{container:!0,children:Object(W.jsx)(u.a,{item:!0,xs:12,children:Object(W.jsxs)(l.a,{elevation:0,style:{backgroundColor:"#551a8b",padding:"10px",textAlign:"center",color:"#fff"},children:[Object(W.jsx)(b.a,{variant:"button",children:"Acesso negado"}),Object(W.jsx)(b.a,{children:"Para aceder ao conte\xfado dessa p\xe1gina fa\xe7a o login."})]})})})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{style:{position:"fixed",width:"100%",marginTop:"55px",zIndex:"50"},children:Object(W.jsxs)(l.a,{style:{padding:"7px 7px 7px 7px",width:"100%",borderRadius:"0px",textAlign:"center"},children:[Object(W.jsx)(b.a,{variant:"button",style:{textTransform:"none"},children:"\xdaltim@s"}),Object(W.jsx)("br",{}),Object(W.jsxs)(p.a,{disableElevation:!0,variant:"contained",color:"primary",children:[Object(W.jsx)(j.a,{onClick:function(){N(3),q(null)},variant:3==S?"contained":"outlined",style:{borderTopLeftRadius:"1.3em",borderBottomLeftRadius:"1.3em",minWidth:"75px",textTransform:"none"},children:"Geral"}),Object(W.jsx)(j.a,{onClick:function(){N(0),q({startDate:"".concat(Object(C.a)(tt(),"yyyy-MM-dd HH:m")),endDate:"".concat(Object(C.a)(new Date,"yyyy-MM-dd HH:mm"))})},variant:0==S?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"},children:"Hoje"}),Object(W.jsx)(j.a,{onClick:function(){N(1),q({endDate:"".concat(et(1)),startDate:"".concat(et(8))})},variant:1==S?"contained":"outlined",style:{minWidth:"75px",borderLeft:"none",textTransform:"none"},children:"7 dias"}),Object(W.jsx)(j.a,{onClick:function(){N(2),q({endDate:"".concat(et(1)),startDate:"".concat(et(31))})},variant:2==S?"contained":"outlined",style:{borderTopRightRadius:"1.3em",borderBottomRightRadius:"1.3em",minWidth:"75px",textTransform:"none",borderLeft:"none"},children:"30 dias"})]})]})}),Object(W.jsx)("br",{}),Object(W.jsx)(h.a,{color:"secondary",onClick:function(){H(!0)},style:{position:"fixed",boxShadow:"none",zIndex:49,bottom:"0px",right:"0px",margin:"auto"},children:Object(W.jsx)(w.a,{})}),Object(W.jsx)(h.a,{color:"primary",onClick:function(){J(Q-1)},disabled:Q<=0,style:{position:"fixed",boxShadow:"none",zIndex:49,top:"127px",left:"0px",margin:"auto"},children:Object(W.jsx)(A.a,{})}),Object(W.jsx)(h.a,{color:"primary",onClick:function(){J(Q+1)},disabled:Q>1,style:{position:"fixed",boxShadow:"none",zIndex:49,top:"127px",right:"0px",margin:"auto"},children:Object(W.jsx)(k.a,{})}),0==Q&&Object(W.jsx)("div",{style:{padding:"10px",marginTop:"107px"},children:Object(W.jsx)(Bt,{isLoading:a,period:I,charts:L.filter((function(t){return"table"==t.component}))})}),1==Q&&Object(W.jsx)("div",{style:{padding:"4px",marginTop:"107px"},children:Object(W.jsx)(Lt,{isLoading:a,period:I,charts:L.filter((function(t){return"table"!=t.component&&"comments"!=t.component}))})}),2==Q&&Object(W.jsx)("div",{style:{padding:"10px",marginTop:"107px"},children:Object(W.jsx)(pt,{isLoading:a,period:I,charts:L.filter((function(t){return"comments"==t.component}))})}),Object(W.jsxs)(x.a,{open:R,title:"Dashboard collection",children:[Object(W.jsx)(f.a,{style:{padding:"0px"},children:Object(W.jsx)(m.a,{component:"div",role:"list",children:Ut.map((function(t,e){return Object(W.jsx)(O.a,{role:"listitem",button:!0,onClick:function(){$(t),H(!1)},children:Object(W.jsx)(y.a,{primary:t.displayName})},e)}))})}),Object(W.jsx)(v.a,{style:{textAlign:"right"},children:Object(W.jsx)(j.a,{onClick:function(){H(!1)},color:"secondary",children:"Fechar"})})]})]})}}}]);