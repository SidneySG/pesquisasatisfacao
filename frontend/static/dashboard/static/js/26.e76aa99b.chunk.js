(this["webpackJsonpfrontend.atendimento.co.mz"]=this["webpackJsonpfrontend.atendimento.co.mz"]||[]).push([[26],{1817:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return q}));var a=i(29),n=i.n(a),s=i(146),c=i(51),r=i(16),l=i(0),o=i.n(l),u=i(18),d=i(402),b=i(227),j=i(448),m=i(449),O=i(433),f=i(181),h=i(403),x=i(404),p=i(405),v=i(88),y=i(458),g=i(89),S=i.n(g),k=i(400),_=i(648),A=i.n(_),N=i(414),z=i.n(N),w=i(139),H=i.n(w),P=i(447),C=i(34),I=i(760),V=i.n(I),F=i(2),E={},M=[],U=[];function q(e){var t,i,a=Object(u.g)().id,g=Object(l.useState)(!0),_=Object(r.a)(g,2),N=_[0],w=_[1],I=Object(l.useState)(!1),q=Object(r.a)(I,2),B=q[0],D=q[1],G=Object(l.useState)(!1),J=Object(r.a)(G,2),T=J[0],W=J[1];function Q(){return(Q=Object(c.a)(n.a.mark((function e(){var t,i,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(C.c)().getOrganisationUnits("?fields=id,name,displayName,shortName,uid,code,orgUnitType,logo,bgImage,attributeSets&id=".concat(atob(a))),Object(C.c)().getAttributeSet()]);case 2:t=e.sent,i=Object(r.a)(t,2),s=i[0],c=i[1],E=s.data[0],M=c.data,U=s.data[0].attributeSets,w(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){return Q.apply(this,arguments)}),[]);var R={addAttributeSet:function(e){U.push(e),D(!B)},removeAttributeSet:function(e){U=U.filter((function(t){return t!==e})),D(!B)}},X=function(e,t){return Object(F.jsx)(f.a,{elevation:0,style:{border:"1px solid #c4c4c4",width:"100%",height:280,overflow:"auto"},square:!0,children:Object(F.jsxs)(d.a,{dense:!0,component:"div",role:"list",children:[e.map((function(e,i){return Object(F.jsxs)(b.a,{onDoubleClick:function(){return R[t.includes("All")?"addAttributeSet":"removeAttributeSet"](e.id)},role:"listitem",button:!0,children:[Object(F.jsx)(j.a,{primary:e.displayName}),Object(F.jsx)(m.a,{children:t.includes("All")?Object(F.jsx)(h.a,{color:"primary",size:"small",onClick:function(){R.addAttributeSet(e.id)},children:Object(F.jsx)(A.a,{})}):Object(F.jsx)(h.a,{color:"secondary",size:"small",onClick:function(){R.removeAttributeSet(e.id)},children:Object(F.jsx)(z.a,{})})})]},i)})),Object(F.jsx)(b.a,{})]})})};function Z(){return(Z=Object(c.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.resolve(Object(C.c)().setAttributeSetsToOrgUnits({id:E.id,attributeSets:U.map((function(e){return{id:e}}))}));case 3:e.messageBox("Institui\xe7\xe3o actualizada com exito!"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.messageBox("Ocorreu um erro na tentaiva de actualizar a Institui\xe7\xe3o");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return Object(F.jsxs)("div",{className:V.a.container,style:{minHeight:"100vh"},children:[Object(F.jsx)(f.a,{elevation:0,square:!0,className:V.a.sticky,children:Object(F.jsxs)("div",{className:V.a.stickyInner,children:[Object(F.jsx)(v.a,{variant:"h6",className:V.a.h6,children:"Gest\xe3o de fichas"}),Object(F.jsx)(P.a,{color:"primary",className:V.a.fab,onClick:function(){W(!0)},type:"submit",children:Object(F.jsx)(H.a,{})})]})}),Object(F.jsx)(O.a,{children:!N&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(v.a,{color:"initial",children:["Nome da Institui\xe7\xe3o: ",E.displayName]}),Object(F.jsxs)(k.a,{container:!0,spacing:2,children:[Object(F.jsx)(k.a,{item:!0,sm:6,children:Object(F.jsx)(p.a,(t={disabled:!0,type:"text",variant:"outlined",name:"filterAllPermissions",margin:"dense"},Object(s.a)(t,"disabled",!0),Object(s.a)(t,"id","filterAllPermissions"),Object(s.a)(t,"fullWidth",!0),Object(s.a)(t,"label","Filter"),t))}),Object(F.jsx)(k.a,{item:!0,sm:6,children:Object(F.jsx)(p.a,(i={disabled:!0,type:"text",variant:"outlined",name:"filterSelectedPermissions",margin:"dense"},Object(s.a)(i,"disabled",!0),Object(s.a)(i,"id","filterSelectedPermissions"),Object(s.a)(i,"fullWidth",!0),Object(s.a)(i,"label","Filter"),i))}),Object(F.jsx)(k.a,{item:!0,sm:6,children:X(M.filter((function(e){return!U.includes(e.id)})),"AllAttributeSets")}),Object(F.jsx)(k.a,{item:!0,sm:6,children:X(U.map((function(e){return M.filter((function(t){return t.id==e}))[0]})),"AttributeSets")})]}),Object(F.jsx)("br",{}),Object(F.jsx)(y.a,{open:T,autoHideDuration:5e3,onClose:function(){W(!1)},message:"Pretende salvar estas altera\xe7\xf5es?",action:Object(F.jsxs)(o.a.Fragment,{children:[Object(F.jsx)(x.a,{color:"secondary",size:"small",onClick:function(){return Z.apply(this,arguments)},children:"Salvar"}),Object(F.jsx)(h.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){W(!1)},children:Object(F.jsx)(S.a,{fontSize:"small"})})]}),className:V.a.snackbar})]})})]})}},648:function(e,t,i){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,((a=i(69))&&a.__esModule?a:{default:a}).default)("M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z");t.default=n},760:function(e,t,i){e.exports={container:"instituicoes_container__hG95x",h6:"instituicoes_h6__RpaE2",sticky:"instituicoes_sticky__2X5OQ",stickyInner:"instituicoes_stickyInner__3E8k7",fab:"instituicoes_fab__1AOga"}}}]);