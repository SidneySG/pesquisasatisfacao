(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[60],{6663:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var n,r=a(75),i=a.n(r),o=a(82),l=a(12),c=a(52),d=a(0),u=a.n(d),s=a(13),m=a(17),p=a(227),b=a(223),E=a(224),g=a(114),v=a(59),x=a(161),f=a(494),h=a(345),y=a(500),w=a(495),j=a(381),O=a(6645),B=a(212),k=a(226),C=a(222),S=a(197),N=a(22),W=a(27),_=a(264),T=(a(263),a(388)),L=a.n(T),A=a(540),I=a.n(A),D=a(541),M=a.n(D),P=a(858),z=[],F=(n={border:"0px",backgroundColor:"white",padding:"0px 4px 0px 2px"},Object(c.a)(n,"border","1px solid #D0D7E5"),Object(c.a)(n,"borderWidth","0px 1px 1px 0px"),Object(S.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{margin:"auto",height:320,display:"block",maxWidth:400,overflow:"hidden",width:"auto"},dots:{paddingTop:15,margin:"-10px auto"},dotsMobile:{paddingTop:0},dotsMobileLandscape:{paddingTop:20}}}))),J=null;function V(){var e=F(),t=Object(N.a)(),a=Object(d.useState)(!1),n=Object(l.a)(a,2),r=(n[0],n[1]),c=Object(d.useState)({}),S=Object(l.a)(c,2),T=S[0],A=S[1],D=Object(d.useState)({}),V=Object(l.a)(D,2),q=V[0],G=(V[1],Object(d.useState)([])),R=Object(l.a)(G,2),U=(R[0],R[1],u.a.useState(0)),H=Object(l.a)(U,2),K=H[0],Q=H[1],X=Object(d.useState)(!1),Y=Object(l.a)(X,2),Z=Y[0],$=(Y[1],Object(P.a)(["clientID"])),ee=Object(l.a)($,2),te=(ee[0],ee[1],function(){Q((function(e){return e+1}))}),ae=function(){Q((function(e){return e-1}))};function ne(){return(ne=Object(o.a)(i.a.mark((function e(){var t,a,n,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),t=window.location.href.split("/"),t=atob(t[t.length-1].split("'").join("/")),J=t.split("'")[0],t=t.split("'")[1],e.next=7,Promise.all([Object(W.e)().getAttributeSetById(t),Object(W.e)().getOptionSets()]);case 7:a=e.sent,n=Object(l.a)(a,2),o=n[0],c=n[1],z=c.data,A(o.data),r(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.useEffect)((function(){!function(){ne.apply(this,arguments)}()}),[]),Z?u.a.createElement(s.a,{to:"/success"}):u.a.createElement(p.a,{style:{backgroundColor:"#551a8b"}},u.a.createElement(b.a,null,u.a.createElement("br",null),Boolean(T.attributes)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(E.a,{container:!0},u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{padding:"7px",margin:"auto",borderTop:"7px solid #f00"}},u.a.createElement(v.a,{variant:"h5",gutterBottom:!0},T.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},T.displayName)))),u.a.createElement("br",null),u.a.createElement(_.b,{initialValues:q,onSubmit:function(e,t){var a=t.setSubmitting;function n(){return(n=Object(o.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object.keys(t).map((function(e){return{attribute:Number.parseInt(e),value:Array.isArray(t[e])?t[e].join(","):t[e]}})),n={attribute_set:{id:T.id},attribute_values:a,org_unit:{id:J}},!(J.length>15)){e.next=7;break}return e.next=5,Promise.resolve(Object(W.e)().savePlaceByID(J));case 5:r=e.sent,n.orgUnit.id=r.data.id;case 7:return e.next=9,Promise.resolve(Object(W.e)().postAttributeValueSet(JSON.stringify(n)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){n.apply(this,arguments)}(e),setTimeout((function(){a(!1)}),500)}},(function(a){var n=a.values,r=a.touched,i=a.errors,o=(a.dirty,a.isSubmitting,a.handleChange),l=a.handleBlur,c=(a.handleSubmit,a.handleReset,a.setFieldValue);return u.a.createElement(_.a,null,u.a.createElement(E.a,{container:!0,spacing:2},T.attributes.map((function(a){return Boolean(a.optionSet.options.length>0)?"radio"==a.control.toLowerCase()?u.a.createElement(E.a,{item:!0,sm:12},u.a.createElement(g.a,{variant:"outlined",elevation:0,style:{width:"calc(95vw - 15px)",maxWidth:"calc(95vw - 30px)",padding:"7px",margin:"auto"}},u.a.createElement(v.a,{variant:"body1",gutterBottom:!0},a.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},a.description),u.a.createElement(x.a,{component:"fieldset"},u.a.createElement(f.a,{"aria-label":"gender",name:"gender1",value:n[a.id],onChange:function(e){c(a.id,e.target.value)}},a.optionSet.options.map((function(e,t){return u.a.createElement(h.a,{key:t,value:e.id+"",control:u.a.createElement(y.a,null),label:e.displayName})})))))):"checkbox"==a.control.toLowerCase()?u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{width:"calc(95vw - 15px)",maxWidth:"calc(95vw - 30px)",padding:"7px",margin:"auto"}},u.a.createElement(v.a,{variant:"body1",gutterBottom:!0},a.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},a.description),u.a.createElement(x.a,{component:"fieldset"},u.a.createElement(w.a,null,z.filter((function(e){return e.id==a.option_set}))[0].options.map((function(e){return u.a.createElement(h.a,{key:e.id,value:e,control:u.a.createElement(j.a,{value:e.id,checked:!!Boolean(n[a.attribute.id])&&!!n[a.attribute.id].includes(e.id+""),name:a.id,onChange:o}),label:e.displayName})})))))):"richtextbox"==a.control.toLowerCase()?u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{padding:"10px",backgroundColor:"#000",color:"#fff"}},u.a.createElement(v.a,{variant:"h6"},"We should have a RichTextBox here")),u.a.createElement("br",null)):Boolean(z.filter((function(e){return e.id==a.option_set}))[0].options[0].foto)?null!==z.filter((function(e){return e.id==a.option_set}))[0].options[0].foto?u.a.createElement(E.a,{item:!0,sm:12,xs:12,style:{textAlign:"center"}},u.a.createElement(v.a,{variant:"button"},z.filter((function(e){return e.id==a.option_set}))[0].options[K].displayName),u.a.createElement(L.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:K,onChangeIndex:function(e){var t=z.filter((function(e){return e.id==a.option_set}))[0].options[e].id;c(a.id,t),Q(e)},enableMouseEvents:!0},z.filter((function(e){return e.id==a.option_set}))[0].options.map((function(t,a){return u.a.createElement("div",{key:a,style:{backgroundColor:"#eee"}},Math.abs(K-a)<=2?u.a.createElement("img",{className:e.img,src:"".concat(W.a+t.foto.url)}):null)}))),u.a.createElement(O.a,{style:{backgroundColor:"transparent"},steps:z.filter((function(e){return e.id==a.option_set}))[0].options.length,position:"static",variant:"text",activeStep:K,nextButton:u.a.createElement(B.a,{size:"small",onClick:te,disabled:K===z.filter((function(e){return e.id==a.option_set}))[0].options.length-1},"rtl"===t.direction?u.a.createElement(I.a,null):u.a.createElement(M.a,null)),backButton:u.a.createElement(B.a,{size:"small",onClick:ae,disabled:0===K},"rtl"===t.direction?u.a.createElement(M.a,null):u.a.createElement(I.a,null))})):void 0:u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{width:"calc(95vw - 15px)",maxWidth:"calc(95vw - 30px)",padding:"7px",margin:"auto"}},u.a.createElement(v.a,{variant:"body1",gutterBottom:!0},a.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},a.description),u.a.createElement(k.a,{value:n[a.id],select:!0,variant:"outlined",margin:"dense",error:i[a.id]&&r[a.id],helperText:i[a.id],onChange:o,onBlur:l,name:a.id,fullWidth:!0,type:"text"},z.filter((function(e){return e.id==a.option_set}))[0].options.map((function(e){return u.a.createElement(C.a,{key:e.id,value:e.id+""},e.displayName)}))))):"upload"==a.control.toLowerCase()?u.a.createElement(E.a,{item:!0,sm:12},u.a.createElement(E.a,{container:!0},u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(v.a,{variant:"button"},a.displayName)),u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement("p",null,"Arraste e solte a imagen aqui ou clique para selecion\xe1-la")))):"textarea"==a.control.toLowerCase()?u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{width:"calc(95vw - 15px)",maxWidth:"calc(95vw - 30px)",padding:"7px",margin:"auto"}},u.a.createElement(v.a,{variant:"body1",gutterBottom:!0},a.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},a.description),u.a.createElement(k.a,{value:n[a.id],variant:"outlined",multiline:!0,rows:4,error:i[a.id]&&r[a.id],helperText:i[a.id],onChange:o,margin:"dense",onBlur:l,name:a.id,fullWidth:!0,placeholder:"Sua resposta",type:"text"}))):u.a.createElement(E.a,{item:!0,sm:12,xs:12},u.a.createElement(g.a,{elevation:0,variant:"outlined",style:{width:"calc(95vw - 15px)",maxWidth:"calc(95vw - 30px)",padding:"7px",margin:"auto"}},u.a.createElement(v.a,{variant:"body1",gutterBottom:!0},a.displayName),u.a.createElement(v.a,{variant:"body2",gutterBottom:!0},a.description),u.a.createElement(k.a,{value:n[a.id],variant:"outlined",error:i[a.id]&&r[a.id],helperText:i[a.id],onChange:o,margin:"dense",onBlur:l,name:a.id,fullWidth:!0,placeholder:"Sua resposta",type:"text"}),u.a.createElement("br",null),u.a.createElement(B.a,{color:"primary",size:"small",variant:"outlined"},"Limpar")))})),u.a.createElement(E.a,{item:!0,sm:12,style:{paddingTop:"10px",textAlign:"right"}},u.a.createElement(p.a,{display:"flex"},u.a.createElement(p.a,null,u.a.createElement(B.a,{color:"secondary",component:m.b,to:"/"},"Cancel")),u.a.createElement(p.a,{flexGrow:0},"\xa0"),u.a.createElement(p.a,null,u.a.createElement(B.a,{disableElevation:!0,type:"submit",color:"primary",variant:"contained"},"Save"))))))})))))}}}]);
//# sourceMappingURL=60.1d5ad984.chunk.js.map