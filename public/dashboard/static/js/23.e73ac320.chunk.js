(this["webpackJsonpfrontend.atendimento.co.mz"]=this["webpackJsonpfrontend.atendimento.co.mz"]||[]).push([[23],{1563:function(e,t,a){"use strict";var n=a(1),i=a(3),c=a(0),r=(a(7),a(4)),l=a(43),o=a(6),s=a(88),d=a(8),u=c.forwardRef((function(e,t){e.checked;var a=e.classes,o=e.className,u=e.control,b=e.disabled,m=(e.inputRef,e.label),h=e.labelPlacement,p=void 0===h?"end":h,j=(e.name,e.onChange,e.value,Object(i.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),O=Object(l.a)(),f=b;"undefined"===typeof f&&"undefined"!==typeof u.props.disabled&&(f=u.props.disabled),"undefined"===typeof f&&O&&(f=O.disabled);var g={disabled:f};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof u.props[t]&&"undefined"!==typeof e[t]&&(g[t]=e[t])})),c.createElement("label",Object(n.a)({className:Object(r.a)(a.root,o,"end"!==p&&a["labelPlacement".concat(Object(d.a)(p))],f&&a.disabled),ref:t},j),c.cloneElement(u,g),c.createElement(s.a,{component:"span",className:Object(r.a)(a.label,f&&a.disabled)},m))}));t.a=Object(o.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(u)},1610:function(e,t,a){"use strict";var n=a(1),i=a(3),c=a(0),r=(a(7),a(4)),l=a(605),o=a(52),s=Object(o.a)(c.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=Object(o.a)(c.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),u=a(10),b=Object(o.a)(c.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),m=a(8),h=a(6),p=c.createElement(d,null),j=c.createElement(s,null),O=c.createElement(b,null),f=c.forwardRef((function(e,t){var a=e.checkedIcon,o=void 0===a?p:a,s=e.classes,d=e.color,u=void 0===d?"secondary":d,b=e.icon,h=void 0===b?j:b,f=e.indeterminate,g=void 0!==f&&f,x=e.indeterminateIcon,y=void 0===x?O:x,v=e.inputProps,k=e.size,C=void 0===k?"medium":k,N=Object(i.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),w=g?y:h,z=g?y:o;return c.createElement(l.a,Object(n.a)({type:"checkbox",classes:{root:Object(r.a)(s.root,s["color".concat(Object(m.a)(u))],g&&s.indeterminate),checked:s.checked,disabled:s.disabled},color:u,inputProps:Object(n.a)({"data-indeterminate":g},v),icon:c.cloneElement(w,{fontSize:void 0===w.props.fontSize&&"small"===C?C:w.props.fontSize}),checkedIcon:c.cloneElement(z,{fontSize:void 0===z.props.fontSize&&"small"===C?C:z.props.fontSize}),ref:t},N))}));t.a=Object(h.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(u.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(u.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(f)},1815:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ee}));var n=a(28),i=a(29),c=a.n(i),r=a(51),l=a(16),o=a(0),s=a.n(o),d=a(438),u=a(439),b=a(440),m=a(441),h=a(442),p=a(443),j=a(433),O=a(181),f=a(404),g=a(455),x=a(447),y=a(403),v=a(405),k=a(1563),C=a(429),N=a(1610),w=a(450),z=a(88),I=a(400),S=a(139),E=a.n(S),F=a(456),B=a(760),P=a.n(B),M=a(413),_=a.n(M),R=a(71),T=(a(62),a(34)),W=a(761),U=a(2),L={height:"450px",width:"100%"},A={fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeOpacity:1,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:1},V={lat:-25.953724,lng:32.588711},H=null,D=[],$={},q={coordinates:[]},G=[],J=[],Q=[],X={},K=[],Y=[];function Z(e,t){var a=e.target.files,n=new FileReader;n.readAsDataURL(a[0]),n.onloadend=function(){X[t]=n.result}}function ee(e){var t=Object(o.useState)(!0),a=Object(l.a)(t,2),i=a[0],S=a[1],B=Object(o.useState)([]),M=Object(l.a)(B,2),ee=M[0],te=M[1],ae=Object(o.useState)(!1),ne=Object(l.a)(ae,2),ie=(ne[0],ne[1]),ce=Object(o.useState)(!1),re=Object(l.a)(ce,2),le=re[0],oe=re[1],se=s.a.useState({drawingMode:"polygon"}),de=Object(l.a)(se,2),ue=(de[0],de[1]);function be(){return(be=Object(r.a)(c.a.mark((function e(){var t,a,n,i,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,Promise.all([Object(T.c)().getOrganisationUnits(),Object(T.c)().getOrganisationUnitTypes(),Object(T.c)().getOrgUnitVisibilities(),Object(T.c)().getUsers()]);case 3:t=e.sent,a=Object(l.a)(t,4),n=a[0],i=a[1],r=a[2],o=a[3],G=n.data,J=i.data,Q=r.data,K=o.data,ie(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){S(!1),H=e.target.files[0];var t=new FileReader;H=t.readAsText(H),t.onload=function(){var e=JSON.parse(t.result),a=[],n=[];D=e.features[0].geometry.coordinates[0][0].map((function(e){return a.push(e[1]),n.push(e[0]),{lng:e[0],lat:e[1]}}));var i=(Math.min.apply(Math,a)+Math.max.apply(Math,a))/2,c=(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2;V={lat:i,lng:c},$.coordenadas=D,te(D),S(!0)}}Object(o.useEffect)((function(){return be.apply(this,arguments)}),[]);var he=function(e){};return Object(U.jsx)("div",{className:P.a.container,children:Object(U.jsx)(R.b,{initialValues:q,onSubmit:function(t,a){var n=a.setSubmitting;function i(){return(i=Object(r.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(X).forEach((function(e){a[e]=X[e]})),a.coordinates.length<=0&&ee.length>0?a.coordinates=ee:a.coordinates.length<=0&&delete a.coordinates,a.users=Y,t.next=5,Promise.resolve(Object(T.c)().postOrganisationUnits(JSON.stringify(a)));case 5:e.messageBox("Institui\xe7\xe3o criada com exito!");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){i.apply(this,arguments)}(t),setTimeout((function(){n(!1)}),500)},children:function(e){var t=e.values,a=e.touched,c=e.errors,r=(e.dirty,e.isSubmitting,e.handleChange),l=e.handleBlur,o=(e.handleSubmit,e.handleReset,e.setFieldValue);return Object(U.jsxs)(R.a,{children:[Object(U.jsx)(O.a,{elevation:0,square:!0,className:P.a.sticky,children:Object(U.jsxs)("div",{className:P.a.stickyInner,children:[Object(U.jsx)(z.a,{variant:"h6",className:P.a.h6,children:"Registo de institui\xe7\xe3o"}),Object(U.jsx)(x.a,{color:"primary",className:P.a.fab,type:"submit",children:Object(U.jsx)(E.a,{})})]})}),Object(U.jsxs)(j.a,{className:P.a.container,children:[Object(U.jsxs)(I.a,{container:!0,spacing:2,children:[Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{value:t.name,error:c.name&&a.name,helperText:c.name,name:"name",id:"name",margin:"dense",onChange:r,onBlur:l,variant:"outlined",label:"Name (*)",fullWidth:!0})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{value:t.shortName,error:c.shortName&&a.shortName,helperText:c.shortName,name:"shortName",id:"shortName",margin:"dense",onChange:r,onBlur:l,variant:"outlined",label:"ShortName (*)",fullWidth:!0})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{value:t.displayName,error:c.displayName&&a.displayName,helperText:c.displayName,name:"displayName",id:"displayName",margin:"dense",onChange:r,onBlur:l,variant:"outlined",label:"DisplayName (*)",fullWidth:!0})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{label:"Type",fullWidth:!0,select:!0,helperText:c.orgUnitType&&a.orgUnitType,name:"orgUnitType",id:"orgUnitType",variant:"outlined",margin:"dense",onChange:r,onBlur:l,children:J.map((function(e){return Object(U.jsx)(w.a,{value:e,children:e},e)}))})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(F.a,{onChange:function(e,t){o("parent",t)},fullWidth:!0,id:"parent",size:"small",getOptionLabel:function(e){return e.displayName},options:G,style:{minWidth:200},renderInput:function(e){return Object(U.jsx)(v.a,Object(n.a)(Object(n.a)({variant:"outlined",margin:"dense",fullWidth:!0},e),{},{label:"Parent (*)"}))}})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{id:"visibility",label:"Visibility",variant:"outlined",margin:"dense",helperText:c.visibility&&a.visibility,name:"visibility",select:!0,fullWidth:!0,onChange:r,children:Q.map((function(e){return Object(U.jsx)(w.a,{value:e,children:e},e)}))})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(k.a,{label:"Incluir fichas gerais",control:Object(U.jsx)(N.a,{checked:t.includeGeneralForms,onChange:function(e){o("includeGeneralForms",e.target.checked)},name:"includeGeneralForms"})})}),Object(U.jsxs)(I.a,{item:!0,children:[Object(U.jsx)("input",{onChange:function(e){return Z(e,"logo")},accept:"image/*",style:{display:"none"},id:"logo-file",multiple:!0,type:"file"}),Object(U.jsx)("label",{htmlFor:"logo-file",children:Object(U.jsx)(f.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span",children:"Upload Logo"})})]}),Object(U.jsxs)(I.a,{item:!0,children:[Object(U.jsx)("input",{onChange:function(e){return Z(e,"bgImage")},accept:"image/*",style:{display:"none"},id:"bg-file",multiple:!0,type:"file"}),Object(U.jsx)("label",{htmlFor:"bg-file",children:Object(U.jsx)(f.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span",children:"Upload Background Image"})})]}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(v.a,{label:"Description",variant:"outlined",margin:"dense",multiline:!0,fullWidth:!0})}),Object(U.jsx)(I.a,{item:!0,sm:6,children:Object(U.jsx)(z.a,{variant:"button",color:"initial",children:"Area geogr\xe1fica"})}),Object(U.jsx)(I.a,{item:!0,sm:6,style:{textAlign:"right"},children:Object(U.jsxs)("label",{htmlFor:"upload-photo",children:[Object(U.jsx)("input",{onChange:me,style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file"}),Object(U.jsx)(f.a,{color:"primary",variant:"contained",disableElevation:!0,component:"span",children:"Carregar"})]})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(O.a,{variant:"outlined",style:{minHeight:"450px"},children:i?Object(U.jsx)(W.c,{libraries:["drawing","places"],id:"script-loader",children:Object(U.jsxs)(W.b,{id:"example-map",mapContainerStyle:L,draggable:!0,zoom:13,center:V,children:[Object(U.jsx)(W.f,{onLoad:he,paths:ee,options:A}),Object(U.jsx)(W.a,{drawingMode:"polygon",options:{drawingControl:!0,drawingControlOptions:{drawingModes:["polygon"]},polygonOptions:{fillColor:"#2196F3",strokeColor:"#2196F3",fillOpacity:.5,strokeWeight:2,clickable:!0,editable:!0,draggable:!0,zIndex:1}},onPolygonComplete:function(e){var t=e.getPath().getArray().map((function(e){return{lat:e.lat(),lng:e.lng()}}));o("coordinates",t),ue((function(e){return Object.assign({},e,{drawingMode:"maker"})}))}})]})}):Object(U.jsx)(g.a,{style:{textAlign:"center",marginTop:"220px"},children:Object(U.jsx)(C.a,{})})})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(F.a,{onChange:function(e,t){Y.push(t);var a=new Set(Y);Y=Array.from(a),oe(!le)},getOptionLabel:function(e){return e.username},fullWidth:!0,id:"utilizadores",size:"small",options:K,style:{minWidth:200},renderInput:function(e){return Object(U.jsx)(v.a,Object(n.a)(Object(n.a)({variant:"outlined",margin:"dense",fullWidth:!0},e),{},{label:"Adicione utilizadores"}))}})}),Object(U.jsx)(I.a,{item:!0,sm:12,children:Object(U.jsx)(d.a,{component:O.a,children:Object(U.jsxs)(u.a,{size:"small",children:[Object(U.jsx)(b.a,{children:Object(U.jsxs)(m.a,{children:[Object(U.jsx)(h.a,{children:"Username"}),Object(U.jsx)(h.a,{children:"Name"}),Object(U.jsx)(h.a,{children:"Email"}),Object(U.jsx)(h.a,{})]})}),Object(U.jsx)(p.a,{children:Y.map((function(e,t){return Object(U.jsxs)(m.a,{children:[Object(U.jsx)(h.a,{component:"th",scope:"row",children:e.username}),Object(U.jsx)(h.a,{children:e.first_name+" "+e.last_name}),Object(U.jsx)(h.a,{children:e.email}),Object(U.jsx)(h.a,{align:"right",children:Object(U.jsx)(y.a,{onClick:function(){Y=Y.filter((function(e,a){return a!==t})),oe(!le)},size:"small",children:Object(U.jsx)(_.a,{})})})]},t)}))})]})})})]}),Object(U.jsx)("br",{})]})]})}})})}},605:function(e,t,a){"use strict";var n=a(1),i=a(35),c=a(3),r=a(0),l=(a(7),a(4)),o=a(90),s=a(43),d=a(6),u=a(403),b=r.forwardRef((function(e,t){var a=e.autoFocus,d=e.checked,b=e.checkedIcon,m=e.classes,h=e.className,p=e.defaultChecked,j=e.disabled,O=e.icon,f=e.id,g=e.inputProps,x=e.inputRef,y=e.name,v=e.onBlur,k=e.onChange,C=e.onFocus,N=e.readOnly,w=e.required,z=e.tabIndex,I=e.type,S=e.value,E=Object(c.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),F=Object(o.a)({controlled:d,default:Boolean(p),name:"SwitchBase",state:"checked"}),B=Object(i.a)(F,2),P=B[0],M=B[1],_=Object(s.a)(),R=j;_&&"undefined"===typeof R&&(R=_.disabled);var T="checkbox"===I||"radio"===I;return r.createElement(u.a,Object(n.a)({component:"span",className:Object(l.a)(m.root,h,P&&m.checked,R&&m.disabled),disabled:R,tabIndex:null,role:void 0,onFocus:function(e){C&&C(e),_&&_.onFocus&&_.onFocus(e)},onBlur:function(e){v&&v(e),_&&_.onBlur&&_.onBlur(e)},ref:t},E),r.createElement("input",Object(n.a)({autoFocus:a,checked:d,defaultChecked:p,className:m.input,disabled:R,id:T&&f,name:y,onChange:function(e){var t=e.target.checked;M(t),k&&k(e,t)},readOnly:N,ref:x,required:w,tabIndex:z,type:I,value:S},g)),P?b:O)}));t.a=Object(d.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(b)},760:function(e,t,a){e.exports={container:"instituicoes_container__hG95x",h6:"instituicoes_h6__RpaE2",sticky:"instituicoes_sticky__2X5OQ",stickyInner:"instituicoes_stickyInner__3E8k7",fab:"instituicoes_fab__1AOga"}}}]);